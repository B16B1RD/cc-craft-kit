---
id: "3ca50521-ba9a-4816-a68a-c95042983f32"
name: "/cft:spec phase <id> completed で仕様書のフェーズが review のまま"
phase: "requirements"
branch_name: "fix/spec-3ca50521-phase-stuck-on-review"
github_issue_number: null
pr_url: null
created_at: "2025-12-06T15:30:00.000Z"
updated_at: "2025-12-06T15:30:00.000Z"
---

# /cft:spec phase <id> completed で仕様書のフェーズが review のまま

## 1. 背景と目的

### 背景

`/cft:spec phase <spec-id> completed` コマンドを実行しても、仕様書のフェーズが `completed` に更新されず、`review` のままになるバグが発生している。

### 目的

`/cft:spec phase <id> completed` コマンドが正しく動作し、仕様書のフェーズが確実に `completed` に更新されるようにする。

---

## 2. 対象ユーザー

cc-craft-kit を使用して仕様駆動開発を行う開発者

---

## 3. 受け入れ基準

### 必須要件

- [ ] `/cft:spec phase <id> completed` 実行後、仕様書の phase が "completed" に更新される
- [ ] YAML フロントマターの updated_at が現在時刻に更新される

### 機能要件

- [ ] コマンド実行後、変更がコミットされる
- [ ] ベースブランチへの切り替えが行われる
- [ ] 作業ブランチが削除される（オプション）

### 非機能要件

- [ ] エラーが発生した場合、適切なメッセージが表示される

---

## 4. 制約条件

- 既存の `/cft:spec phase` コマンドの仕様に準拠する
- YAML フロントマター形式を維持する

---

## 5. 依存関係

- `.claude/commands/cft/spec.md` - spec コマンドの定義
- Git 操作（コミット、ブランチ切り替え）

---

## 6. 参考情報

- 関連する既存の仕様書: 1019511f（同様の問題を修正済み）
- PR #944 で類似の修正が行われた可能性あり
