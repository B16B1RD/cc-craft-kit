# スラッシュコマンド実行時の案内で本開発キットの案内が /cft:xxx になっている。正しくは、/cft:xxx。

**仕様書 ID:** a1b27700-9da6-4b6a-9933-ddc1423ed198
**フェーズ:** completed
**作成日時:** 2025/11/18 16:40:24
**更新日時:** 2025/11/18 17:09:48

---

## 1. 背景と目的

### 背景

cc-craft-kit のスラッシュコマンド定義ファイル（`src/slash-commands/*.md`）内で、コマンド名が `/cft:xxx` と記載されています。しかし、実際のスラッシュコマンドのプレフィックスは `/cft:` であり、ユーザーが `/cft:spec-create` などのコマンドを実行しようとすると、コマンドが見つからないエラーが発生します。

**影響範囲:**
- 24 個のスラッシュコマンド定義ファイルすべてで `/cft:` が使用されている
- ドキュメント（CLAUDE.md、README.md 等）でも `/cft:` が使用されている可能性がある
- ユーザーがコマンドを実行できず、開発体験が著しく損なわれる

### 目的

すべてのスラッシュコマンド定義ファイルおよびドキュメントで、コマンド名を正しい `/cft:xxx` 形式に統一し、ユーザーが混乱なくコマンドを実行できるようにする。

---

## 2. 対象ユーザー

cc-craft-kit を使用するすべての開発者、特に以下のようなユーザー:

- スラッシュコマンドを実行するすべてのユーザー
- ドキュメントを参照して開発を進めるユーザー
- 新規に cc-craft-kit を導入するユーザー

---

## 3. 受け入れ基準

### 必須要件

- [ ] すべてのスラッシュコマンド定義ファイルで `/cft:` が `/cft:` に置換されている
- [ ] すべてのドキュメントファイルで `/cft:` が `/cft:` に置換されている
- [ ] `/cft:` の記述が存在しないことを grep で確認できる
- [ ] 以下の代表的なスラッシュコマンドが正常に実行できる:
  - `/cft:status` - プロジェクト状態確認
  - `/cft:spec-list` - 仕様書一覧表示
  - `/cft:spec-create "テスト仕様書"` - 仕様書作成

### 機能要件

- [ ] 24 個のスラッシュコマンド定義ファイル（`src/slash-commands/*.md`）をすべて修正
- [ ] CLAUDE.md、README.md、docs/*.md などのドキュメントファイルを修正
- [ ] 仕様書ファイル（`.cc-craft-kit/specs/*.md`）も修正対象に含める
- [ ] 修正後、正規表現で `/cft:` が残っていないことを検証

### 非機能要件

- [ ] 既存の機能に影響を与えない
- [ ] コマンドの動作が変わらない
- [ ] ドキュメントの可読性を維持

---

## 4. 制約条件

- スラッシュコマンドのプレフィックスは `/cft:` で固定（変更不可）
- `.claude/commands/cft/` ディレクトリにシンボリックリンクが配置されている
- 置換は単純な文字列置換で実施可能
- Git 履歴への影響は許容される

---

## 5. 依存関係

### 修正対象ファイル

**スラッシュコマンド定義ファイル（24ファイル）:**
- `src/slash-commands/*.md` - すべてのスラッシュコマンド定義

**ドキュメントファイル:**
- `CLAUDE.md` - プロジェクト全体の開発ガイド
- `README.md` - プロジェクトの概要
- `docs/ARCHITECTURE.md` - アーキテクチャドキュメント
- `docs/QUICK_START.md` - クイックスタートガイド

**仕様書ファイル:**
- `.cc-craft-kit/specs/*.md` - すでに作成された仕様書

### 依存する仕様

- なし（ドキュメント修正）

---

## 6. 参考情報

- Claude Code のスラッシュコマンド仕様
- `.claude/commands/` ディレクトリ構造

---

## 7. 実装方針

### 一括置換アプローチ

`sed` コマンドまたは `find` + `sed` を使用して、すべてのファイルで `/cft:` を `/cft:` に一括置換します。

#### 修正対象ディレクトリ

1. **スラッシュコマンド定義:** `src/slash-commands/`
2. **ドキュメント:** `CLAUDE.md`, `README.md`, `docs/`
3. **仕様書:** `.cc-craft-kit/specs/`

#### 実装手順

**1. 修正前の確認:**

すべての `/cft:` の出現箇所を確認:

```bash
grep -r "/cft:" src/slash-commands/ CLAUDE.md README.md docs/ .cc-craft-kit/specs/ 2>/dev/null | wc -l
```

**2. Git バックアップ作成:**

```bash
# 現在の状態をコミットして、ロールバック可能にする
git add -A
git commit -m "backup: コマンド名置換前のバックアップ"
```

**3. 一括置換実行（バックアップあり）:**

```bash
# バックアップファイル (.bak) を作成しながら置換
find src/slash-commands docs .cc-craft-kit/specs -name "*.md" -type f \
  -exec sed -i.bak 's|/cft:|/cft:|g' {} +

# ドキュメントファイル
sed -i.bak 's|/cft:|/cft:|g' CLAUDE.md README.md
```

**4. 置換結果の差分確認:**

```bash
# 変更されたファイル数を確認
git status -s | wc -l

# 各ファイルの差分を確認
git diff --color-words | less

# /cft: に変更された箇所をすべて確認
git diff | grep -C 3 "/cft:"
```

**5. バックアップファイルの削除:**

```bash
# バックアップファイルの確認
find . -name "*.bak" -type f

# 問題なければバックアップ削除
find . -name "*.bak" -type f -delete
```

**6. 修正後の検証:**

置換が完了し、`/cft:` が残っていないことを確認:

```bash
grep -r "/cft:" src/slash-commands/ CLAUDE.md README.md docs/ .cc-craft-kit/specs/ 2>/dev/null
# 何も出力されないことを確認
```

**7. スラッシュコマンドの動作確認:**

```bash
# 代表的なコマンドが正常に実行できることを確認
/cft:status
/cft:spec-list
/cft:spec-create "テスト仕様書" "テスト用"
```

**8. Git コミット:**

```bash
# 変更をコミット
git add -A
git commit -m "fix: スラッシュコマンドプレフィックスを /cft: から /cft: に統一"
```

### 手動修正が必要な箇所

以下の箇所は文脈を考慮して手動で確認:

- コード例やコメント内の `/cft:` が意図的なものかどうか
- 外部ドキュメントへのリンク内の記述
- Git 履歴やコミットメッセージ（修正不要）

### 検証方法

1. **grep で残存確認:**
   ```bash
   # /cft: が残っていないか確認
   grep -rn "/cft:" src/ CLAUDE.md README.md docs/ .cc-craft-kit/
   # 何も出力されなければOK
   ```

2. **意図しない置換の確認:**
   ```bash
   # /cft: に変更された箇所をすべて確認
   git diff | grep -C 3 "/cft:"
   ```

3. **スラッシュコマンド実行テスト:**
   ```bash
   # 代表的なコマンドが正常に実行できることを確認
   /cft:status
   /cft:spec-list
   /cft:spec-create "テスト仕様書" "テスト用"
   ```

4. **ドキュメントの整合性確認:**
   - CLAUDE.md を読んで、コマンド名が正しいか確認
   - README.md のクイックスタートセクションを確認
   - docs/QUICK_START.md のコマンド例を確認

---

## 8. 実装タスクリスト

### タスク一覧

1. **修正前の確認**
   - [ ] grep で `/cft:` の出現箇所を確認
   - [ ] 影響範囲を把握

2. **Git バックアップ作成**
   - [ ] 現在の状態をコミット
   - [ ] ロールバック可能な状態にする

3. **一括置換実行（スラッシュコマンド定義ファイル）**
   - [ ] `src/slash-commands/*.md` の 24 ファイルを置換
   - [ ] バックアップファイル（.bak）を作成

4. **一括置換実行（ドキュメントファイル）**
   - [ ] `CLAUDE.md` を置換
   - [ ] `README.md` を置換
   - [ ] `docs/*.md` を置換

5. **一括置換実行（仕様書ファイル）**
   - [ ] `.cc-craft-kit/specs/*.md` を置換

6. **置換結果の差分確認**
   - [ ] `git status` で変更されたファイル数を確認
   - [ ] `git diff` で変更内容を確認
   - [ ] 意図しない置換がないか確認

7. **バックアップファイルの削除**
   - [ ] `.bak` ファイルを確認
   - [ ] 問題なければ削除

8. **修正後の検証**
   - [ ] grep で `/cft:` が残っていないことを確認
   - [ ] 置換漏れがないか確認

9. **スラッシュコマンドの動作確認**
   - [ ] `/cft:status` を実行
   - [ ] `/cft:spec-list` を実行
   - [ ] `/cft:spec-create "テスト仕様書"` を実行

10. **ドキュメントの整合性確認**
    - [ ] CLAUDE.md のコマンド名を確認
    - [ ] README.md のクイックスタートセクションを確認
    - [ ] docs/QUICK_START.md のコマンド例を確認

11. **Git コミット**
    - [ ] 変更をステージング
    - [ ] コミットメッセージを作成
    - [ ] コミット実行

### 依存関係

- タスク 1 → タスク 2（確認後にバックアップ）
- タスク 2 → タスク 3-5（バックアップ後に置換）
- タスク 3-5 → タスク 6（置換後に差分確認）
- タスク 6 → タスク 7（差分確認後にバックアップ削除）
- タスク 7 → タスク 8-10（バックアップ削除後に検証）
- タスク 8-10 → タスク 11（検証完了後にコミット）

### 見積もり

- 所要時間: 約 30 分
- 難易度: 低（単純な文字列置換）
- リスク: 低（Git バックアップあり）
