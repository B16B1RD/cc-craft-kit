# /cft:spec-create 実行時、.env の BASE_BRANCH から feature/spec-xxx ブランチを作成していない

**仕様書 ID:** 2785314d-7bdf-4681-ba68-86f3fcc1f917
**フェーズ:** design
**作成日時:** 2025/11/27 12:00:00
**更新日時:** 2025/11/27 15:26:00

---

## 1. 背景と目的

### 背景

現在の `/cft:spec-create` コマンドは、実行時のカレントブランチから feature/spec-xxx ブランチを作成している。しかし、`.env` ファイルで `BASE_BRANCH` が設定されている場合は、その設定値から分岐するべきである。

### 目的

`.env` の `BASE_BRANCH` 設定を尊重し、指定されたベースブランチから feature/spec-xxx ブランチを作成するように修正する。

---

## 2. 対象ユーザー

cc-craft-kit を使用して仕様駆動開発を行う開発者

---

## 3. 受け入れ基準

### 必須要件

- [ ] `.env` に `BASE_BRANCH` が設定されている場合、その値をベースブランチとして使用する
- [ ] `BASE_BRANCH` が未設定の場合は、現在のブランチから分岐する（既存動作を維持）

### 機能要件

- [ ] `.env` ファイルから `BASE_BRANCH` 環境変数を読み取る
- [ ] `BASE_BRANCH` が設定されている場合、`git branch <new-branch> <BASE_BRANCH>` を実行
- [ ] `BASE_BRANCH` が存在しないブランチを指す場合、適切なエラーメッセージを表示

### 非機能要件

- [ ] 既存のテストが引き続きパスする
- [ ] エラーメッセージは日本語で表示

---

## 4. 制約条件

- プロンプトファースト原則に従い、可能な限りプロンプト（.md）で実装する
- スクリプト変更が必要な場合は最小限に留める

---

## 5. 依存関係

- `/cft:spec-create` スラッシュコマンド定義（`src/slash-commands/spec-create.md`）
- `.env` ファイル設定

---

## 6. 参考情報

- `.env.example` の `BASE_BRANCH` 設定例
- 現在のブランチ作成ロジック（Step 4, Step 5）
