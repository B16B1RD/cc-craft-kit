---
id: "07fc9c5a-f318-4014-84c8-301e96b702a9"
name: "/cft:spec-create æ™‚è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã•ã‚Œãªã„"
phase: "completed"
branch_name: "main"
github_issue_number: null
pr_url: null
created_at: "2025-11-21T11:50:49.784Z"
updated_at: "2025-11-22T09:45:36Z"
---

# /cft:spec-create æ™‚è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã•ã‚Œãªã„


## 1. èƒŒæ™¯ã¨ç›®çš„

### èƒŒæ™¯

ç¾åœ¨ã€`/cft:spec-create` ã‚³ãƒãƒ³ãƒ‰ã§ä»•æ§˜æ›¸ã‚’ä½œæˆã—ãŸéš›ã€ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚

1. **Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãŒå®Ÿè¡Œã•ã‚Œãªã„**
   - `/cft:spec-phase` ã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚§ãƒ¼ã‚ºç§»è¡Œæ™‚ã¯ Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹
   - ã—ã‹ã—ã€`/cft:spec-create` ã‚³ãƒãƒ³ãƒ‰ã§ã¯è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãŒå®Ÿè¡Œã•ã‚Œãªã„
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§ `git add` ã¨ `git commit` ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹

2. **ä¸€è²«æ€§ã®ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**
   - ãƒ•ã‚§ãƒ¼ã‚ºç§»è¡Œæ™‚ã¯è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ã®ã«ã€ä»•æ§˜æ›¸ä½œæˆæ™‚ã¯æ‰‹å‹•ã‚³ãƒŸãƒƒãƒˆãŒå¿…è¦
   - ã“ã®éä¸€è²«æ€§ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ··ä¹±ã®å¯èƒ½æ€§ãŒã‚ã‚‹

3. **ã‚³ãƒŸãƒƒãƒˆæ¼ã‚Œã®ãƒªã‚¹ã‚¯**
   - æ‰‹å‹•ã‚³ãƒŸãƒƒãƒˆã‚’å¿˜ã‚Œã‚‹ã¨ã€ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚³ãƒŸãƒƒãƒˆã•ã‚Œãšã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸æ•´åˆã®åŸå› ã«ãªã‚‹

### ç›®çš„

`/cft:spec-create` ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«ã€ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã« Git ã‚³ãƒŸãƒƒãƒˆã—ã€ãƒ•ã‚§ãƒ¼ã‚ºç§»è¡Œæ™‚ã¨ä¸€è²«ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æä¾›ã™ã‚‹ã€‚
---

## 2. å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼

- **cc-craft-kit é–‹ç™ºè€…** - ä»•æ§˜æ›¸ã‚’ä½œæˆã™ã‚‹ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…** - Git ãƒªãƒã‚¸ãƒˆãƒªã®æ•´åˆæ€§ã‚’ç¶­æŒã—ãŸã„ãƒ¦ãƒ¼ã‚¶ãƒ¼
---

## 3. å—ã‘å…¥ã‚ŒåŸºæº–

### å¿…é ˆè¦ä»¶

- [ ] `/cft:spec-create` ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«ã€ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•çš„ã« Git ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹
- [ ] ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé©åˆ‡ãªå½¢å¼ã§ç”Ÿæˆã•ã‚Œã‚‹ï¼ˆ`feat: <ä»•æ§˜æ›¸å> ã®è¦ä»¶å®šç¾©ã‚’å®Œäº†`ï¼‰
- [ ] æ—¢å­˜ã® `/cft:spec-phase` ã‚³ãƒãƒ³ãƒ‰ã®è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆæ©Ÿèƒ½ã¨åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹

### æ©Ÿèƒ½è¦ä»¶

- [ ] ä»•æ§˜æ›¸ã®ä½œæˆãŒå®Œäº†å¾Œã€`spec.created` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã‚‹
- [ ] Git çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã€è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã‚’å®Ÿè¡Œã™ã‚‹
- [ ] ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ä»•æ§˜æ›¸åãŒå«ã¾ã‚Œã‚‹
- [ ] ã‚³ãƒŸãƒƒãƒˆæˆåŠŸ/å¤±æ•—ã®ãƒ­ã‚°ãŒè¨˜éŒ²ã•ã‚Œã‚‹
- [ ] Git ãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€è­¦å‘Šã®ã¿è¡¨ç¤ºã—ã¦ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹

### éæ©Ÿèƒ½è¦ä»¶

- [ ] æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒå…¨ã¦é€šéã™ã‚‹
- [ ] æ–°ã—ã„è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ ã™ã‚‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ãŒãªã„ï¼ˆã‚³ãƒŸãƒƒãƒˆå‡¦ç†ã¯éåŒæœŸã§å®Ÿè¡Œï¼‰
---

## 4. åˆ¶ç´„æ¡ä»¶

- æ—¢å­˜ã® Git çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å†åˆ©ç”¨ã™ã‚‹ï¼ˆé‡è¤‡å®Ÿè£…ã‚’é¿ã‘ã‚‹ï¼‰
- `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆãŒæ—¢ã«ç™ºç«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå‰æï¼ˆå®Ÿè£…ç¢ºèªãŒå¿…è¦ï¼‰
- Git ãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„ç’°å¢ƒã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
- pre-commit ãƒ•ãƒƒã‚¯ãŒå¤±æ•—ã—ãŸå ´åˆã§ã‚‚ã€ä»•æ§˜æ›¸ã®ä½œæˆè‡ªä½“ã¯æˆåŠŸã™ã‚‹

### ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä»•æ§˜

| çŠ¶æ³ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« |
|---|---|---|
| Git æœªåˆæœŸåŒ– | "âš ï¸ Git ãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ‰‹å‹•ã§ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚" | warn |
| pre-commit ãƒ•ãƒƒã‚¯å¤±æ•— | "âš ï¸ Git ã‚³ãƒŸãƒƒãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚pre-commit ãƒ•ãƒƒã‚¯ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚" | warn |
| Git ã‚³ãƒãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼ | "âŒ Git ã‚³ãƒŸãƒƒãƒˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ" | error |
| ã‚³ãƒŸãƒƒãƒˆæˆåŠŸ | "âœ… ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Git ã‚³ãƒŸãƒƒãƒˆã—ã¾ã—ãŸ" | info |
---

## 5. ä¾å­˜é–¢ä¿‚

**æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:**

- `src/commands/spec/create.ts` - `/cft:spec-create` ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
- `src/core/workflow/git-integration.ts` - Git çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- `src/core/workflow/event-bus.ts` - ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ï¼ˆ`spec.created` ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
- `src/core/events/types.ts` - ã‚¤ãƒ™ãƒ³ãƒˆå‹å®šç¾©

**é–¢é€£ä»•æ§˜:**

- Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆæ©Ÿèƒ½ï¼ˆ`CLAUDE.md` ã‚»ã‚¯ã‚·ãƒ§ãƒ³: Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆæ©Ÿèƒ½ï¼‰
---

## 6. å‚è€ƒæƒ…å ±

**é–¢é€£å®Ÿè£…:**

- `src/core/workflow/git-integration.ts:1-100` - æ—¢å­˜ã® Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆå®Ÿè£…
- `src/commands/spec/create.ts:100-200` - ä»•æ§˜æ›¸ä½œæˆãƒ­ã‚¸ãƒƒã‚¯

**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**

- `CLAUDE.md` - Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆæ©Ÿèƒ½ã®ä»•æ§˜

**ç¾åœ¨ã®å‹•ä½œ:**

- `/cft:spec-phase` ã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚§ãƒ¼ã‚ºç§»è¡Œæ™‚ã¯ã€`spec.phase_changed` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã€Git çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒè‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã‚’å®Ÿè¡Œ
- `/cft:spec-create` ã‚³ãƒãƒ³ãƒ‰ã§ã¯ã€`spec.created` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã‚‹ãŒã€Git çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹

**ç¢ºèªãŒå¿…è¦ãªå®Ÿè£…:**

1. `src/commands/spec/create.ts` ã§ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã¦ã„ã‚‹ã‹
2. `src/core/workflow/git-integration.ts` ã§ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹
3. ç™»éŒ²ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

**æ—¢å­˜ã® `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼:**

- `src/core/workflow/github-integration.ts` ã§ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­ã—ã€GitHub Issue ã‚’è‡ªå‹•ä½œæˆ
- æ–°ã—ã„ Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆæ©Ÿèƒ½ãŒ GitHub çµ±åˆã«å½±éŸ¿ã‚’ä¸ãˆãªã„ã‹æ¤œè¨¼ãŒå¿…è¦
- ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®å®Ÿè¡Œé †åº: GitHub Issue ä½œæˆ â†’ Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆï¼ˆæ–°è¦è¿½åŠ ï¼‰
---

## 7. è©³ç´°è¨­è¨ˆ

### 7.1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

#### ç¾çŠ¶åˆ†æ

**æ—¢å­˜ã®å®Ÿè£…çŠ¶æ³:**

1. **`src/commands/spec/create.ts`** (ä»•æ§˜æ›¸ä½œæˆã‚³ãƒãƒ³ãƒ‰)
   - 192-199 è¡Œç›®ã§ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã—ã¦ã„ã‚‹ âœ…
   - `getEventBusAsync()` ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ²ã‚’å¾…æ©Ÿã—ã¦ã„ã‚‹ âœ…

2. **`src/core/workflow/github-integration.ts`** (GitHub çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼)
   - 78-162 è¡Œç›®ã§ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã€GitHub Issue ã‚’è‡ªå‹•ä½œæˆ âœ…
   - æ—¢ã«å®Ÿè£…æ¸ˆã¿ã§æ­£å¸¸å‹•ä½œã—ã¦ã„ã‚‹

3. **`src/core/workflow/git-integration.ts`** (Git çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼)
   - 235-243 è¡Œç›®ã§ `registerGitIntegrationHandlers()` é–¢æ•°ã‚’å®šç¾©
   - `spec.phase_changed` ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿ã‚’ãƒªãƒƒã‚¹ãƒ³ (ä¿®æ­£å‰)
   - `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼æœªå®Ÿè£…ã«ã‚ˆã‚Šå•é¡Œç™ºç”Ÿ

4. **`src/core/workflow/event-bus.ts`** (ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹)
   - 180-216 è¡Œç›®ã§ `registerHandlersAsync()` ãŒçµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è‡ªå‹•ç™»éŒ²
   - 196 è¡Œç›®ã§ `registerGitIntegrationHandlers(bus, db)` ã‚’å‘¼ã³å‡ºã—

#### å•é¡Œã®åŸå› 

ä»•æ§˜æ›¸ä½œæˆæ™‚ã« Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãŒå®Ÿè¡Œã•ã‚Œãªã„åŸå› ã‚’èª¿æŸ»ã—ã¾ã—ãŸã€‚`src/core/workflow/git-integration.ts` ã® `registerGitIntegrationHandlers()` é–¢æ•°å†…ã§ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ãªã„ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚

#### è§£æ±ºæ–¹é‡

`registerGitIntegrationHandlers()` é–¢æ•°ã«ã€`spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¿½åŠ ã™ã‚‹ã€‚

**å®Ÿè£…æ–¹é‡:**

1. **æ–°è¦ãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¿½åŠ **: `handleSpecCreatedCommit()` é–¢æ•°ã‚’ä½œæˆ
2. **æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ã®å†åˆ©ç”¨**: `gitCommit()`, `generateCommitMessage()` ã‚’å†åˆ©ç”¨
3. **ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ²**: `registerGitIntegrationHandlers()` å†…ã§ `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³
---

### 7.2. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

#### ä»•æ§˜æ›¸ä½œæˆæ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼

```text
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ /cft:spec-create ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
   â†“
2. src/commands/spec/create.ts:140-160
   - ãƒ–ãƒ©ãƒ³ãƒä½œæˆï¼ˆå¿…è¦ãªå ´åˆï¼‰
   â†“
3. src/commands/spec/create.ts:163-174
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
   â†“
4. src/commands/spec/create.ts:176-189
   - Markdown ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ + fsync()
   â†“
5. src/commands/spec/create.ts:192-199
   - spec.created ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
   â†“
6. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ä¸¦åˆ—å®Ÿè¡Œ:
   - src/core/workflow/github-integration.ts:78-162
     â†’ GitHub Issue è‡ªå‹•ä½œæˆ âœ… (æ—¢å­˜)
   - src/core/workflow/git-integration.ts (æ–°è¦è¿½åŠ )
     â†’ Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ ğŸ†•
```

#### Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã®è©³ç´°ãƒ•ãƒ­ãƒ¼

```text
spec.created ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡
   â†“
1. Git ãƒªãƒã‚¸ãƒˆãƒªã®å­˜åœ¨ç¢ºèª
   - isGitRepository() â†’ false ãªã‚‰è­¦å‘Šè¡¨ç¤ºã—ã¦ã‚¹ã‚­ãƒƒãƒ—
   â†“
2. ä»•æ§˜æ›¸æƒ…å ±ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—
   - db.selectFrom('specs').where('id', '=', specId)
   â†“
3. ã‚³ãƒŸãƒƒãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®æ±ºå®š
   - getCommitTargets('requirements', specId)
   - è¿”å´å€¤: ['.cc-craft-kit/specs/<spec-id>.md']
   â†“
4. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
   - generateCommitMessage(spec.name, 'requirements')
   - è¿”å´å€¤: "feat: <ä»•æ§˜æ›¸å> ã®è¦ä»¶å®šç¾©ã‚’å®Œäº†"
   â†“
5. Git ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œ
   - gitCommit(files, message)
   - git add .cc-craft-kit/specs/<spec-id>.md
   - git commit -m "feat: ..."
   â†“
6. çµæœè¡¨ç¤º
   - æˆåŠŸ: "âœ“ ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Git ã‚³ãƒŸãƒƒãƒˆã—ã¾ã—ãŸ"
   - å¤±æ•—: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° + "You can commit manually..."
```
---

### 7.3. API è¨­è¨ˆ

#### æ–°è¦é–¢æ•°: `handleSpecCreatedCommit()`

**ã‚·ã‚°ãƒãƒãƒ£:**

```typescript
async function handleSpecCreatedCommit(
  event: WorkflowEvent<{ name: string; description: string | null; phase: string }>,
  db: Kysely<Database>
): Promise<void>
```

**å¼•æ•°:**

- `event`: spec.created ã‚¤ãƒ™ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  - `event.specId`: ä»•æ§˜æ›¸ ID (UUID)
  - `event.data.name`: ä»•æ§˜æ›¸å
  - `event.data.phase`: ãƒ•ã‚§ãƒ¼ã‚º (å¸¸ã« 'requirements')

- `db`: Kysely ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

**å‡¦ç†å†…å®¹:**

1. Git ãƒªãƒã‚¸ãƒˆãƒªç¢ºèª
2. ä»•æ§˜æ›¸å–å¾— (DB ã‚¯ã‚¨ãƒª)
3. ã‚³ãƒŸãƒƒãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«æ±ºå®š
4. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
5. Git ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œ
6. çµæœãƒ­ã‚°å‡ºåŠ›

**æ—¢å­˜é–¢æ•°ã¨ã®çµ±åˆ:**

- `isGitRepository()`: Git ãƒªãƒã‚¸ãƒˆãƒªç¢ºèªï¼ˆæ—¢å­˜ï¼‰
- `getCommitTargets('requirements', specId)`: ã‚³ãƒŸãƒƒãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«æ±ºå®šï¼ˆæ—¢å­˜ï¼‰
- `generateCommitMessage(spec.name, 'requirements')`: ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆï¼ˆæ—¢å­˜ï¼‰
- `gitCommit(files, message)`: Git ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œï¼ˆæ—¢å­˜ï¼‰

**å®Ÿè£…ã‚³ãƒ¼ãƒ‰:**

```typescript
/**
 * ä»•æ§˜æ›¸ä½œæˆæ™‚ã®è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆå‡¦ç†
 */
async function handleSpecCreatedCommit(
  event: WorkflowEvent<{ name: string; description: string | null; phase: string }>,
  db: Kysely<Database>
): Promise<void> {
  try {
    // Git ãƒªãƒã‚¸ãƒˆãƒªç¢ºèª
    if (!isGitRepository()) {
      const errorHandler = getErrorHandler();
      await errorHandler.handle(new Error('Not a Git repository'), {
        event: 'spec.created',
        specId: event.specId,
        phase: event.data.phase,
        action: 'git_auto_commit',
        message: 'Skipping auto-commit',
      });
      return;
    }

    // ä»•æ§˜æ›¸å–å¾—
    const spec = await db
      .selectFrom('specs')
      .where('id', '=', event.specId)
      .selectAll()
      .executeTakeFirst();

    if (!spec) {
      return;
    }

    // ã‚³ãƒŸãƒƒãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®æ±ºå®šï¼ˆrequirements ãƒ•ã‚§ãƒ¼ã‚ºã®ã¿ï¼‰
    const files = getCommitTargets('requirements', spec.id);

    // ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
    const message = generateCommitMessage(spec.name, 'requirements');

    // Git ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œ
    const result = await gitCommit(files, message);

    if (result.success) {
      if (result.skipped) {
        console.log('\nâ„¹ Auto-commit skipped: No files to commit (ignored by .gitignore)');
      } else {
        console.log(`\nâœ“ Auto-committed: ${message}`);
      }
    } else {
      const errorHandler = getErrorHandler();
      await errorHandler.handle(new Error(result.error || 'Git commit failed'), {
        event: 'spec.created',
        specId: event.specId,
        phase: event.data.phase,
        action: 'git_auto_commit',
        commitMessage: message,
        files,
      });
      console.log('You can commit manually with: git add . && git commit\n');
    }
  } catch (error) {
    // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚ä»•æ§˜æ›¸ä½œæˆã¯æˆåŠŸã•ã›ã‚‹
    const errorHandler = getErrorHandler();
    const errorObj = error instanceof Error ? error : new Error(String(error));
    await errorHandler.handle(errorObj, {
      event: 'spec.created',
      specId: event.specId,
      action: 'git_auto_commit',
    });
  }
}
```

#### ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ²ã®æ›´æ–°

**ä¿®æ­£ç®‡æ‰€:** `src/core/workflow/git-integration.ts:235-243`

**ä¿®æ­£å‰:**

```typescript
export function registerGitIntegrationHandlers(eventBus: EventBus, db: Kysely<Database>): void {
  // spec.phase_changed â†’ Gitè‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ
  eventBus.on<{ oldPhase: string; newPhase: string }>(
    'spec.phase_changed',
    async (event: WorkflowEvent<{ oldPhase: string; newPhase: string }>) => {
      await handlePhaseChangeCommit(event, db);
    }
  );
}
```

**ä¿®æ­£å¾Œ:**

```typescript
export function registerGitIntegrationHandlers(eventBus: EventBus, db: Kysely<Database>): void {
  // spec.created â†’ Gitè‡ªå‹•ã‚³ãƒŸãƒƒãƒˆï¼ˆæ–°è¦è¿½åŠ ï¼‰
  eventBus.on<{ name: string; description: string | null; phase: string }>(
    'spec.created',
    async (event: WorkflowEvent<{ name: string; description: string | null; phase: string }>) => {
      await handleSpecCreatedCommit(event, db);
    }
  );

  // spec.phase_changed â†’ Gitè‡ªå‹•ã‚³ãƒŸãƒƒãƒˆï¼ˆæ—¢å­˜ï¼‰
  eventBus.on<{ oldPhase: string; newPhase: string }>(
    'spec.phase_changed',
    async (event: WorkflowEvent<{ oldPhase: string; newPhase: string }>) => {
      await handlePhaseChangeCommit(event, db);
    }
  );
}
```
---

### 7.4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ

#### ã‚¨ãƒ©ãƒ¼ã‚·ãƒŠãƒªã‚ªã¨å¯¾å¿œ

| ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ | æ¤œå‡ºæ–¹æ³• | å¯¾å¿œ | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« |
|---|---|---|---|
| **Git æœªåˆæœŸåŒ–** | `isGitRepository()` ãŒ false | è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º + ã‚¹ã‚­ãƒƒãƒ— | warn |
| **ä»•æ§˜æ›¸ãƒ¬ã‚³ãƒ¼ãƒ‰æœªå­˜åœ¨** | `db.selectFrom('specs')` ãŒ null | ã‚¹ã‚­ãƒƒãƒ—ï¼ˆãƒ­ã‚°ãªã—ï¼‰ | - |
| **git add å¤±æ•—** | `spawnSync('git', ['add'])` ã®çµ‚äº†ã‚³ãƒ¼ãƒ‰ ãŒ 0 ä»¥å¤– | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¨æ‰‹å‹•ã‚³ãƒŸãƒƒãƒˆæ¡ˆå†… | error |
| **git commit å¤±æ•—** | `spawnSync('git', ['commit'])` ã®çµ‚äº†ã‚³ãƒ¼ãƒ‰ ãŒ 0 ä»¥å¤– | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¨æ‰‹å‹•ã‚³ãƒŸãƒƒãƒˆæ¡ˆå†… | error |
| **pre-commit ãƒ•ãƒƒã‚¯å¤±æ•—** | `git commit` ã® stderr ã« "hook" ã‚’å«ã‚€ | è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ + æ‰‹å‹•ã‚³ãƒŸãƒƒãƒˆæ¡ˆå†… | warn |
| **.gitignore ã§é™¤å¤–** | `getIgnoredFiles()` ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿”ã™ | ã‚¹ã‚­ãƒƒãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º | info |
| **ãã®ä»–ã®ä¾‹å¤–** | try-catch ã§æ•æ‰ | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° + ã‚¹ã‚­ãƒƒãƒ— | error |

#### ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§

| çŠ¶æ³ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | å‡ºåŠ›å…ˆ |
|---|---|---|
| æˆåŠŸ | `âœ“ Auto-committed: feat: <ä»•æ§˜æ›¸å> ã®è¦ä»¶å®šç¾©ã‚’å®Œäº†` | stdout |
| .gitignore ã§ã‚¹ã‚­ãƒƒãƒ— | `â„¹ Auto-commit skipped: No files to commit (ignored by .gitignore)` | stdout |
| Git æœªåˆæœŸåŒ– | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ãƒ­ã‚°è¨˜éŒ²ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯éè¡¨ç¤ºï¼‰ | logs ãƒ†ãƒ¼ãƒ–ãƒ« |
| ã‚³ãƒŸãƒƒãƒˆå¤±æ•— | `You can commit manually with: git add . && git commit` | stdout |
---

### 7.5. ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

#### å˜ä½“ãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«:** `tests/core/workflow/git-integration-spec-created.test.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:**

1. **Git ãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–æ¸ˆã¿**
   - `isGitRepository()` â†’ true
   - `gitCommit()` â†’ success: true
   - æœŸå¾…: ã‚³ãƒŸãƒƒãƒˆæˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

2. **Git æœªåˆæœŸåŒ–**
   - `isGitRepository()` â†’ false
   - æœŸå¾…: è­¦å‘Šãƒ­ã‚°è¨˜éŒ²ã€ã‚¹ã‚­ãƒƒãƒ—

3. **ä»•æ§˜æ›¸ãƒ¬ã‚³ãƒ¼ãƒ‰æœªå­˜åœ¨**
   - `db.selectFrom('specs')` â†’ null
   - æœŸå¾…: ã‚¹ã‚­ãƒƒãƒ—ï¼ˆã‚¨ãƒ©ãƒ¼ãªã—ï¼‰

4. **git commit å¤±æ•—**
   - `gitCommit()` â†’ success: false, error: "commit failed"
   - æœŸå¾…: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ² + æ‰‹å‹•ã‚³ãƒŸãƒƒãƒˆæ¡ˆå†…

5. **.gitignore ã§é™¤å¤–**
   - `gitCommit()` â†’ success: true, skipped: true
   - æœŸå¾…: ã‚¹ã‚­ãƒƒãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

#### E2E ãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«:** `tests/e2e/spec-create-auto-commit.test.ts`

**ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª:**

1. **æ¨™æº–çš„ãªä»•æ§˜æ›¸ä½œæˆ**
   - `/cft:spec-create "æ–°æ©Ÿèƒ½" "èª¬æ˜"` ã‚’å®Ÿè¡Œ
   - Git ãƒ­ã‚°ã‚’ç¢ºèª: `git log -1 --oneline`
   - æœŸå¾…: `feat: æ–°æ©Ÿèƒ½ ã®è¦ä»¶å®šç¾©ã‚’å®Œäº†` ãŒå«ã¾ã‚Œã‚‹

2. **GitHub Issue è‡ªå‹•ä½œæˆã¨ Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã®çµ±åˆ**
   - `/cft:spec-create "æ–°æ©Ÿèƒ½"` ã‚’å®Ÿè¡Œ
   - GitHub Issue ä½œæˆã‚’ç¢ºèª
   - Git ã‚³ãƒŸãƒƒãƒˆä½œæˆã‚’ç¢ºèª
   - æœŸå¾…: ä¸¡æ–¹ãŒæˆåŠŸã™ã‚‹

3. **pre-commit ãƒ•ãƒƒã‚¯å¤±æ•—æ™‚**
   - pre-commit ãƒ•ãƒƒã‚¯ã‚’è¨­å®šï¼ˆå¸¸ã«å¤±æ•—ï¼‰
   - `/cft:spec-create "æ–°æ©Ÿèƒ½"` ã‚’å®Ÿè¡Œ
   - æœŸå¾…: ä»•æ§˜æ›¸ä½œæˆã¯æˆåŠŸã€ã‚³ãƒŸãƒƒãƒˆå¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
---

### 7.6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

#### è„…å¨åˆ†æ

| è„…å¨ | å¯¾ç­– | å®Ÿè£…ç®‡æ‰€ |
|---|---|---|
| **ã‚³ãƒãƒ³ãƒ‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³** | `spawnSync()` ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é…åˆ—ã‚’ä½¿ç”¨ | `gitCommit()` é–¢æ•° |
| **ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«** | `path.basename()` ã§ä»•æ§˜æ›¸ ID ã‚’ã‚µãƒ‹ã‚¿ã‚¤ã‚º | `getCommitTargets()` é–¢æ•° |
| **UUID å½è£…** | UUID å½¢å¼ã‚’æ­£è¦è¡¨ç¾ã§æ¤œè¨¼ | `getCommitTargets()` é–¢æ•° |

#### æ—¢å­˜ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ï¼ˆå†åˆ©ç”¨ï¼‰

`src/core/workflow/git-integration.ts` ã®æ—¢å­˜å®Ÿè£…ãŒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã‚’å«ã‚“ã§ã„ã‚‹ãŸã‚ã€ãã®ã¾ã¾å†åˆ©ç”¨ã™ã‚‹ã€‚

1. **`getCommitTargets()` é–¢æ•°ï¼ˆ73-90 è¡Œç›®ï¼‰**
   - UUID å½¢å¼æ¤œè¨¼: `/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i`
   - `path.basename()` ã§ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«å¯¾ç­–

2. **`gitCommit()` é–¢æ•°ï¼ˆ98-146 è¡Œç›®ï¼‰**
   - `spawnSync('git', ['add', ...filesToAdd])` ã§ã‚·ã‚§ãƒ«ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
   - `spawnSync('git', ['commit', '-m', message])` ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ä¸è¦
---

### 7.7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

#### éåŒæœŸå‡¦ç†ã®è¨­è¨ˆ

- `handleSpecCreatedCommit()` ã¯ async é–¢æ•°ã¨ã—ã¦å®Ÿè£…
- Git ã‚³ãƒŸãƒƒãƒˆå‡¦ç†ã¯ I/O bound ã®ãŸã‚ã€éåŒæœŸå®Ÿè¡ŒãŒé©åˆ‡
- `eventBus.emit()` ãŒ `Promise.all()` ã§å…¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä¸¦åˆ—å®Ÿè¡Œã™ã‚‹ãŸã‚ã€GitHub Issue ä½œæˆã¨ Git ã‚³ãƒŸãƒƒãƒˆãŒä¸¦è¡Œå®Ÿè¡Œã•ã‚Œã‚‹

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

- Git ã‚³ãƒŸãƒƒãƒˆå‡¦ç†: 1 ç§’ä»¥å†…
- ä»•æ§˜æ›¸ã®ä½œæˆå…¨ä½“: 3 ç§’ä»¥å†…ï¼ˆGitHub API å‘¼ã³å‡ºã—ã‚’å«ã‚€ï¼‰
---

## 8. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### ã‚±ãƒ¼ã‚¹ 1: æ¨™æº–çš„ãªä»•æ§˜æ›¸ä½œæˆï¼ˆGit åˆæœŸåŒ–æ¸ˆã¿ï¼‰

**å‰ææ¡ä»¶:**

- Git ãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹
- ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒ: `feature/new-feature`

**æ“ä½œ:**

```bash
/cft:spec-create "æ–°æ©Ÿèƒ½ã®å®Ÿè£…" "æ–°æ©Ÿèƒ½ã®èª¬æ˜"
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ:**

1. ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ: `.cc-craft-kit/specs/<spec-id>.md`
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ: `specs` ãƒ†ãƒ¼ãƒ–ãƒ«ã«æŒ¿å…¥
3. GitHub Issue è‡ªå‹•ä½œæˆ
4. Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œ
5. ã‚³ãƒŸãƒƒãƒˆæˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º: "âœ… ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Git ã‚³ãƒŸãƒƒãƒˆã—ã¾ã—ãŸ"

### ã‚±ãƒ¼ã‚¹ 2: Git æœªåˆæœŸåŒ–ç’°å¢ƒ

**å‰ææ¡ä»¶:**

- Git ãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„

**æ“ä½œ:**

```bash
/cft:spec-create "æ–°æ©Ÿèƒ½ã®å®Ÿè£…" "æ–°æ©Ÿèƒ½ã®èª¬æ˜"
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ:**

1. ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ: æˆåŠŸ
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ: æˆåŠŸ
3. Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ: ã‚¹ã‚­ãƒƒãƒ—
4. è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º: "âš ï¸ Git ãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ‰‹å‹•ã§ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚"

### ã‚±ãƒ¼ã‚¹ 3: pre-commit ãƒ•ãƒƒã‚¯å¤±æ•—

**å‰ææ¡ä»¶:**

- Git ãƒªãƒã‚¸ãƒˆãƒªãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹
- pre-commit ãƒ•ãƒƒã‚¯ãŒè¨­å®šã•ã‚Œã¦ãŠã‚Šã€å¤±æ•—ã™ã‚‹è¨­å®šã«ãªã£ã¦ã„ã‚‹

**æ“ä½œ:**

```bash
/cft:spec-create "æ–°æ©Ÿèƒ½ã®å®Ÿè£…" "æ–°æ©Ÿèƒ½ã®èª¬æ˜"
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ:**

1. ä»•æ§˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ: æˆåŠŸ
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ: æˆåŠŸ
3. GitHub Issue è‡ªå‹•ä½œæˆ: æˆåŠŸ
4. Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ: å¤±æ•—ï¼ˆpre-commit ãƒ•ãƒƒã‚¯ã«ã‚ˆã‚‹æ‹’å¦ï¼‰
5. è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º: "âš ï¸ Git ã‚³ãƒŸãƒƒãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚pre-commit ãƒ•ãƒƒã‚¯ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
---

## 9. å®Ÿè£…ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

### ã‚¿ã‚¹ã‚¯ 1: `handleSpecCreatedCommit()` é–¢æ•°ã‚’å®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«:** `src/core/workflow/git-integration.ts`

**å®Ÿè£…å†…å®¹:**

- `handlePhaseChangeCommit()` é–¢æ•°ã¨åŒæ§˜ã®ãƒ­ã‚¸ãƒƒã‚¯ã§ã€`spec.created` ã‚¤ãƒ™ãƒ³ãƒˆç”¨ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½œæˆ
- Git ãƒªãƒã‚¸ãƒˆãƒªç¢ºèªã€ä»•æ§˜æ›¸å–å¾—ã€ã‚³ãƒŸãƒƒãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«æ±ºå®šã€ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆã€Git ã‚³ãƒŸãƒƒãƒˆå®Ÿè¡Œ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: Git æœªåˆæœŸåŒ–ã€ä»•æ§˜æ›¸ãƒ¬ã‚³ãƒ¼ãƒ‰æœªå­˜åœ¨ã€git commit å¤±æ•—

**å®Ÿè£…ç®‡æ‰€:** `src/core/workflow/git-integration.ts:230` (æ–°è¦è¿½åŠ )ã€‚

**ä¾å­˜:** ãªã—ã€‚
---

### ã‚¿ã‚¹ã‚¯ 2: `registerGitIntegrationHandlers()` ã« `spec.created` ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«:** `src/core/workflow/git-integration.ts`

**å®Ÿè£…å†…å®¹:**

- `registerGitIntegrationHandlers()` é–¢æ•°å†…ã§ `eventBus.on('spec.created', ...)` ã‚’ç™»éŒ²
- `handleSpecCreatedCommit()` ã‚’å‘¼ã³å‡ºã™

**å®Ÿè£…ç®‡æ‰€:** `src/core/workflow/git-integration.ts:235-243` (ä¿®æ­£)ã€‚

**ä¾å­˜:** ã‚¿ã‚¹ã‚¯ 1ã€‚
---

### ã‚¿ã‚¹ã‚¯ 3: å˜ä½“ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `tests/core/workflow/git-integration-spec-created.test.ts` (æ–°è¦ä½œæˆ)

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:**

1. Git ãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–æ¸ˆã¿ â†’ ã‚³ãƒŸãƒƒãƒˆæˆåŠŸ
2. Git æœªåˆæœŸåŒ– â†’ è­¦å‘Šãƒ­ã‚°è¨˜éŒ²ã€ã‚¹ã‚­ãƒƒãƒ—
3. ä»•æ§˜æ›¸ãƒ¬ã‚³ãƒ¼ãƒ‰æœªå­˜åœ¨ â†’ ã‚¹ã‚­ãƒƒãƒ—
4. git commit å¤±æ•— â†’ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° + æ‰‹å‹•ã‚³ãƒŸãƒƒãƒˆæ¡ˆå†…
5. .gitignore ã§é™¤å¤– â†’ ã‚¹ã‚­ãƒƒãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

**ä¾å­˜:** ã‚¿ã‚¹ã‚¯ 1, 2ã€‚
---

### ã‚¿ã‚¹ã‚¯ 4: E2E ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:** `tests/e2e/spec-create-auto-commit.test.ts` (æ–°è¦ä½œæˆ)

**ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª:**

1. æ¨™æº–çš„ãªä»•æ§˜æ›¸ä½œæˆ â†’ Git ã‚³ãƒŸãƒƒãƒˆç¢ºèª
2. GitHub Issue è‡ªå‹•ä½œæˆã¨ Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã®çµ±åˆç¢ºèª
3. pre-commit ãƒ•ãƒƒã‚¯å¤±æ•—æ™‚ã®æŒ™å‹•ç¢ºèª

**ä¾å­˜:** ã‚¿ã‚¹ã‚¯ 1, 2ã€‚
---

### ã‚¿ã‚¹ã‚¯ 5: æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šéã™ã‚‹ã“ã¨ã‚’ç¢ºèª

**ã‚³ãƒãƒ³ãƒ‰:** `npm test`

**ç¢ºèªå†…å®¹:**

- å…¨ãƒ†ã‚¹ãƒˆãŒé€šéã™ã‚‹ã“ã¨
- æ–°ã—ã„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒæ—¢å­˜æ©Ÿèƒ½ã«å½±éŸ¿ã‚’ä¸ãˆã¦ã„ãªã„ã“ã¨

**ä¾å­˜:** ã‚¿ã‚¹ã‚¯ 3, 4ã€‚
---

### ã‚¿ã‚¹ã‚¯ 6: ãƒ‰ãƒƒã‚°ãƒ•ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç’°å¢ƒã«åŒæœŸ

**ã‚³ãƒãƒ³ãƒ‰:** `npm run sync:dogfood`

**ç¢ºèªå†…å®¹:**

- `src/` ã®å¤‰æ›´ãŒ `.cc-craft-kit/` ã«æ­£ã—ãã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã“ã¨
- `npm run check:sync` ã§å·®åˆ†ãŒãªã„ã“ã¨

**ä¾å­˜:** ã‚¿ã‚¹ã‚¯ 1, 2ã€‚
---

### ã‚¿ã‚¹ã‚¯ 7: å®Ÿéš›ã« `/cft:spec-create` ã‚’å®Ÿè¡Œã—ã¦å‹•ä½œç¢ºèª

**ç¢ºèªå†…å®¹:**

- ä»•æ§˜æ›¸ä½œæˆæ™‚ã« Git è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨
- ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ `feat: <ä»•æ§˜æ›¸å> ã®è¦ä»¶å®šç¾©ã‚’å®Œäº†` å½¢å¼ã§ã‚ã‚‹ã“ã¨
- GitHub Issue ã‚‚åŒæ™‚ã«è‡ªå‹•ä½œæˆã•ã‚Œã‚‹ã“ã¨

**ä¾å­˜:** ã‚¿ã‚¹ã‚¯ 6ã€‚
