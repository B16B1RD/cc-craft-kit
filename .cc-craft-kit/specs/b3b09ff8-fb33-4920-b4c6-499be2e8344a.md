# 開発キットの textlint と markdownlint を廃止する

**仕様書 ID:** b3b09ff8-fb33-4920-b4c6-499be2e8344a
**フェーズ:** requirements
**作成日時:** 2025/11/23 02:31:33
**更新日時:** 2025/11/23 02:31:33

---

## 1. 背景と目的

### 背景

cc-craft-kit は現在、以下の Markdown 品質チェックツールを使用している:

- **textlint**: 日本語テクニカルライティングのスタイルチェック（技術文書向け、AI執筆ガイドライン、スペーシング等）
- **markdownlint**: Markdown 構文の整合性チェック（行長、タグ許可、リストフォーマット等）

これらは以下の箇所で使用されている:

1. **Git 自動コミット機能** (`src/core/workflow/git-integration.ts:165-195`): 仕様書ファイルのコミット前に `runTextlintFix()` で自動修正を実行
2. **PR 自動作成機能** (`.claude/skills/pr-creator/SKILL.md`): PR 本文の品質保証のため、一時ファイルに対して textlint/markdownlint チェックを実行
3. **CI/CD** (`.github/workflows/ci.yml:48-68`): Documentation Lint ジョブでドキュメント品質をチェック
4. **Pre-commit フック** (`.husky/pre-commit` + `lint-staged`): すべての `.md` ファイルに対して textlint/markdownlint を自動実行

しかし、以下の理由により、これらのツールは開発体験を損なっている:

- Claude Code の native な Markdown 処理能力で十分なケースが多い
- textlint のルール設定が厳格すぎて、柔軟な表現を制限することがある
- CI/CD でのチェック失敗が頻繁に発生し、開発フローを妨げる
- 依存パッケージの管理コスト（5個の devDependencies）

### 目的

textlint と markdownlint を完全に廃止し、以下を実現する:

1. **開発体験の向上**: 過度な品質チェックを削除し、柔軟な Markdown 記述を可能にする
2. **メンテナンスコストの削減**: 依存パッケージ、設定ファイル、npm scripts を削減
3. **CI/CD の高速化**: Documentation Lint ジョブを削除し、テストフローを簡素化
4. **Git 自動コミット機能の簡素化**: テキスト修正ロジックを削除し、コミットフローを安定化

---

## 2. 対象ユーザー

- **開発者**: cc-craft-kit を使用する開発者全員
- **コントリビューター**: リポジトリにコントリビュートする外部開発者
- **CI/CD**: GitHub Actions ワークフロー

---

## 3. 受け入れ基準

### 必須要件

- [ ] textlint 関連の依存パッケージ（5個）を `package.json` から削除する
- [ ] markdownlint 関連の依存パッケージを `package.json` から削除する
- [ ] `.textlintrc.json` 設定ファイルを削除する
- [ ] `.markdownlint.json` 設定ファイルを削除する
- [ ] `src/core/workflow/git-integration.ts` から `runTextlintFix()` 関数を削除する
- [ ] `git-integration.ts` の `gitCommit()` 関数からテキスト修正ロジックを削除する
- [ ] `.github/workflows/ci.yml` から Documentation Lint ジョブを削除する

### 機能要件

- [ ] `package.json` から以下の npm scripts を削除する: `textlint`, `textlint:fix`, `markdownlint`, `markdownlint:fix`
- [ ] `lint:all` スクリプトから textlint/markdownlint の呼び出しを削除する
- [ ] `lint-staged` 設定から Markdown ファイルの textlint/markdownlint 処理を削除する
- [ ] `.claude/skills/pr-creator/SKILL.md` から textlint/markdownlint チェックの説明を削除する
- [ ] `CLAUDE.md` から `npm run textlint:fix` コマンドの記載を削除する
- [ ] `tests/core/workflow/git-integration-pr-creator.test.ts` でテキストリント関連のテストを修正または削除する

### 非機能要件

- [ ] すべてのテストが成功すること（修正後）
- [ ] 型チェック（`npx tsc --noEmit`）がエラーなく完了すること
- [ ] ESLint チェック（`npm run lint`）がエラーなく完了すること
- [ ] CI/CD が正常に動作すること（Documentation Lint ジョブ削除後）

---

## 4. 制約条件

### 技術的制約

- **TypeScript**: strict mode を有効にして、すべての型チェックを厳格に実施すること
- **Git フック**: `.husky/pre-commit` は他の ESLint・Prettier 処理も担当しているため、Markdown 処理のみ削除し、フック自体は削除しないこと
- **後方互換性**: 既存の仕様書ファイルは修正せず、そのまま保持すること（textlint エラーがあっても問題ない）

### セキュリティ制約

- すべての変更は適切にテストすること
- Git 自動コミット機能の変更により、意図しないファイルがコミットされないこと

### 運用制約

- 廃止後、Claude Code の native な Markdown 処理能力に依存すること
- Markdown 品質チェックの代替手段は導入しないこと（開発体験向上のため）

---

## 5. 依存関係

### 影響を受けるモジュール

- **Git 自動コミット機能** (`src/core/workflow/git-integration.ts`): `runTextlintFix()` 関数の削除により、Markdown ファイルの自動修正が行われなくなる
- **PR 自動作成機能** (`.claude/skills/pr-creator/SKILL.md`): PR 本文の品質チェックが削除される
- **CI/CD** (`.github/workflows/ci.yml`): Documentation Lint ジョブが削除される
- **Pre-commit フック** (`.husky/pre-commit` + `lint-staged`): Markdown ファイルの textlint/markdownlint 処理が削除される

### 削除する依存パッケージ

```json
{
  "@textlint-ja/textlint-rule-preset-ai-writing": "^1.6.1",
  "markdownlint-cli2": "^0.19.0",
  "textlint": "^14.0.5",
  "textlint-rule-preset-ja-spacing": "^2.4.3",
  "textlint-rule-preset-ja-technical-writing": "^12.0.2"
}
```

### 関連仕様書

特になし（既存の仕様書に依存しない独立した変更）

---

## 6. 参考情報

### 影響範囲の詳細

**ファイル別の変更内容:**

1. **src/core/workflow/git-integration.ts**
   - 行165-195: `runTextlintFix()` 関数を削除
   - 行234-250: `gitCommit()` 関数でのテキスト修正ロジックを削除
   - 行374: PR 作成メッセージから textlint/markdownlint の記載を削除

2. **package.json**
   - devDependencies: 5個のパッケージを削除
   - scripts: `textlint`, `textlint:fix`, `markdownlint`, `markdownlint:fix` を削除
   - scripts: `lint:all` を `npm run lint` に変更
   - lint-staged: Markdown ファイルの処理を削除

3. **.github/workflows/ci.yml**
   - 行48-68: Documentation Lint ジョブを削除

4. **.claude/skills/pr-creator/SKILL.md**
   - textlint/markdownlint チェック説明を削除
   - エラーハンドリング関連セクションを削除
   - 制約事項を更新

5. **CLAUDE.md**
   - 行40-42: `npm run textlint:fix` コマンドの記載を削除

6. **tests/core/workflow/git-integration-pr-creator.test.ts**
   - テキストリント関連のテストを修正

### 参考資料

- [ARCHITECTURE.md](./docs/ARCHITECTURE.md) - cc-craft-kit のアーキテクチャ
- [CLAUDE.md](./CLAUDE.md) - 開発規約
- [textlint 公式ドキュメント](https://textlint.github.io/) - 廃止するツールのドキュメント
- [markdownlint-cli2 公式ドキュメント](https://github.com/DavidAnson/markdownlint-cli2) - 廃止するツールのドキュメント
