# 旧名称の Takumi が残存している

**仕様書 ID:** 4bd9226d-0184-4bf6-b62c-ccd53ca94516
**フェーズ:** implementation
**作成日時:** 2025/12/02 00:00:00
**更新日時:** 2025/12/02 21:28:00

---

## 1. 背景と目的

### 背景

cc-craft-kit プロジェクトは、以前「Takumi（匠）」という名称で開発されていた。プロジェクト名の変更に伴い、コードベース全体で cc-craft-kit への統一が進められたが、一部のファイルに旧名称「Takumi」が残存している。具体的には、テンプレートファイルのフッタ、LICENSE ファイル、仕様書ファイル、旧移行スクリプト、npm スクリプト定義などに合計 54 ファイルで残存が確認されている。

### 目的

コードベース内の旧名称「Takumi」への参照をすべて削除または「cc-craft-kit」に置換し、プロジェクト名を完全に統一する。

---

## 2. 対象ユーザー

cc-craft-kit を使用する開発者、およびプロジェクトのメンテナー

---

## 3. 受け入れ基準

### 必須要件

- [ ] テンプレートファイル（design.md.hbs, tasks.md.hbs, requirements.md.hbs）のフッタが「cc-craft-kit」に置換されている
- [ ] LICENSE ファイルの著作権表記が「cc-craft-kit Project Contributors」に置換されている
- [ ] 旧移行スクリプト（migrate-takumi-to-cc-craft-kit.ts, replace-takumi-references.ts, rename-project.ts）が削除されている
- [ ] package.json から Takumi 関連の npm スクリプト（replace:takumi, migrate:takumi 等）が削除されている

### 機能要件

- [ ] 仕様書ファイル内の「Takumi」参照が「cc-craft-kit」に置換されている
- [ ] 新規生成される仕様書のフッタに「cc-craft-kit」と表示される
- [ ] ユーザーが目にするドキュメントから「Takumi」が除去されている

### 非機能要件

- [ ] 置換後、npm test が全て成功する
- [ ] 置換後、npm run sync:dogfood で正しく同期される
- [ ] 置換後、npm run typecheck でエラーが発生しない

---

## 4. 制約条件

- コミット履歴は保持する（ファイル削除時も履歴は残る）
- 商標調査報告書（1e146f72-2d5b-4b61-82b1-51a369206f16.md）は履歴として内容を保持しつつ、プロジェクト名の文脈では置換する
- テストファイルに Takumi 参照がある場合、テストの目的に応じて削除または置換を判断する

---

## 5. 依存関係

- src/scripts/ 配下のスクリプトファイル
- templates/ 配下のテンプレートファイル
- .cc-craft-kit/specs/ 配下の仕様書ファイル
- package.json の scripts セクション
- LICENSE ファイル

---

## 6. 参考情報

- 削除対象ファイル: 4 ファイル（旧移行スクリプト）
- 置換対象ファイル: 13 ファイル以上（テンプレート、仕様書、LICENSE 等）
- Grep 検索コマンド: `grep -r "Takumi" --include="*.ts" --include="*.md" --include="*.hbs" --include="*.json"`

---

## 7. 設計詳細

### 7.1 アーキテクチャ設計

#### 全体構成

本タスクはプロジェクト名統一のためのリファクタリングであり、機能追加や構造変更は伴わない。対象ファイルは以下の3カテゴリに分類される：

```
┌─────────────────────────────────────────────────────────────┐
│                    置換・削除対象ファイル                      │
├─────────────────────────────────────────────────────────────┤
│  [削除対象]                                                  │
│  ├── src/scripts/                                           │
│  │   ├── migrate-takumi-to-cc-craft-kit.ts                  │
│  │   ├── replace-takumi-references.ts                       │
│  │   └── rename-project.ts                                  │
│  └── .cc-craft-kit/scripts/ (同期コピー 3ファイル)            │
│                                                             │
│  [置換対象]                                                  │
│  ├── templates/ (3ファイル: フッタ置換)                       │
│  ├── LICENSE (著作権表記置換)                                │
│  ├── package.json (npm scripts 削除)                        │
│  └── .cc-craft-kit/specs/ (38ファイル: 本文置換)             │
└─────────────────────────────────────────────────────────────┘
```

#### 設計方針

- **削除 vs 置換の判断基準**:
  - 一度限りの移行スクリプト → 削除
  - ユーザーに見えるドキュメント・テンプレート → 置換
- **コミット履歴保持**: Git の履歴は維持される
- **商標調査報告書**: プロジェクト名文脈のみ置換、履歴内容は保持

#### 処理フロー詳細

```
Phase 1: テンプレート置換 (3ファイル)
    │
    ▼
Phase 2: LICENSE 置換 (1ファイル)
    │
    ▼
Phase 3: 仕様書ファイル置換 (38ファイル)
    │
    ▼
Phase 4: package.json npm scripts 削除 (1ファイル)
    │
    ▼
Phase 5: 旧移行スクリプト削除 (6ファイル)
    │
    ▼
Phase 6: 同期・テスト・型チェック実行
```

### 7.2 実装方針

#### 修正対象ファイル

| ファイル | 変更内容 |
|---------|---------|
| `templates/design.md.hbs` | フッタ: `Takumi (匠)` → `cc-craft-kit` |
| `templates/tasks.md.hbs` | フッタ: `Takumi (匠)` → `cc-craft-kit` |
| `templates/requirements.md.hbs` | フッタ: `Takumi (匠)` → `cc-craft-kit` |
| `LICENSE` | 著作権表記: `Takumi Project Contributors` → `cc-craft-kit Project Contributors` |
| `package.json` | `replace:takumi`, `replace:takumi:dry`, `migrate:takumi`, `migrate:takumi:dry` を削除 |
| `.cc-craft-kit/specs/*.md` | 38ファイルの Takumi 参照を置換 |

#### 削除対象ファイル

| ファイル | 削除理由 |
|---------|---------|
| `src/scripts/migrate-takumi-to-cc-craft-kit.ts` | 移行完了済みの一度限りのスクリプト |
| `src/scripts/replace-takumi-references.ts` | 今回の置換で不要になる |
| `src/scripts/rename-project.ts` | 移行完了済みの一度限りのスクリプト |
| `.cc-craft-kit/scripts/` 内の同期コピー (3ファイル) | 上記の同期コピー |

### 7.3 機能マッピング

| 機能 | 現在の実装 | 新しい実装 | 実装場所 |
|-----|----------|----------|---------|
| 仕様書フッタ生成 | `Takumi (匠)` 表示 | `cc-craft-kit` 表示 | templates/*.hbs |
| ライセンス表記 | `Takumi Project Contributors` | `cc-craft-kit Project Contributors` | LICENSE |
| 移行スクリプト | 存在 | 削除 | src/scripts/, .cc-craft-kit/scripts/ |
| npm scripts | replace:takumi, migrate:takumi 等 | 削除 | package.json |

### 7.4 テスト戦略

| テスト対象 | テスト内容 | 検証方法 |
|----------|----------|---------|
| テンプレート置換 | 新規仕様書生成時にフッタが正しいこと | `/cft:spec-create` で新規仕様書を生成し確認 |
| ビルド整合性 | 型エラーがないこと | `npm run typecheck` |
| テストスイート | 既存テストが全てパスすること | `npm test` |
| 同期機能 | dogfood 同期が正常動作すること | `npm run sync:dogfood` |
| Takumi 残存チェック | Takumi 参照が残っていないこと | `grep -r "Takumi"` で検索 |

### 7.5 移行計画

#### Phase 1: テンプレートファイル置換
1. `templates/design.md.hbs` のフッタを置換
2. `templates/tasks.md.hbs` のフッタを置換
3. `templates/requirements.md.hbs` のフッタを置換

#### Phase 2: LICENSE ファイル置換
1. `LICENSE` の著作権表記を置換

#### Phase 3: 仕様書ファイル置換
1. `.cc-craft-kit/specs/*.md` 内の Takumi 参照を一括置換
2. 商標調査報告書は特別対応（履歴保持しつつ文脈置換）

#### Phase 4: package.json 更新
1. Takumi 関連の npm scripts を削除

#### Phase 5: 旧移行スクリプト削除
1. `src/scripts/` 配下の3ファイルを削除
2. `.cc-craft-kit/scripts/` 配下の同期コピーを削除

#### Phase 6: 検証・完了
1. `npm run sync:dogfood` で同期
2. `npm run typecheck` で型チェック
3. `npm test` でテスト実行
4. `grep -r "Takumi"` で残存確認

---

## 8. 実装タスクリスト

### Phase 1: テンプレートファイル置換

- [ ] templates/design.md.hbs のフッタを cc-craft-kit に置換 (#525)
- [ ] templates/tasks.md.hbs のフッタを cc-craft-kit に置換 (#526)
- [ ] templates/requirements.md.hbs のフッタを cc-craft-kit に置換 (#527)

### Phase 2: LICENSE ファイル置換

- [ ] LICENSE の著作権表記を cc-craft-kit Project Contributors に置換 (#528)

### Phase 3: 仕様書ファイル置換

- [ ] .cc-craft-kit/specs/ 配下の全仕様書ファイルから Takumi 参照を cc-craft-kit に置換 (#529)

### Phase 4: package.json 更新

- [ ] package.json から replace:takumi, migrate:takumi 関連の npm scripts を削除 (#530)

### Phase 5: 旧移行スクリプト削除

- [ ] src/scripts/migrate-takumi-to-cc-craft-kit.ts を削除 (#531)
- [ ] src/scripts/replace-takumi-references.ts を削除 (#532)
- [ ] src/scripts/rename-project.ts を削除 (#533)

### Phase 6: 検証・完了

- [ ] npm run sync:dogfood で同期実行 (#534)
- [ ] npm run typecheck で型チェック実行 (#535)
- [ ] npm test でテスト実行 (#536)
- [ ] grep -r "Takumi" で残存確認 (#537)
