# /cft:spec-create で、要件定義が自動実行されていない？

**仕様書 ID:** c723782f-c1fa-4a57-b880-bc4d2cbb2cf0
**フェーズ:** design
**作成日時:** 2025/11/27 12:05:00
**更新日時:** 2025/11/27 18:27:05

---

## 1. 背景と目的

### 背景

`/cft:spec-create` 実行後のガイダンスメッセージを見ると次のステップとして、「1. 仕様書を編集して要件を定義する」となっている。本来自動で要件を定義する仕様としているので、これはおかしい。

現在のスラッシュコマンド定義（spec-create.md）では、Step 8（コードベース解析）と Step 9（仕様書の自動完成）がオプションとなっており、条件に該当しない場合はテンプレート状態のまま仕様書が保存される。また、成功メッセージのテンプレートも「1. 仕様書を編集して要件を定義する」となっており、自動完成が行われた場合でも同じメッセージが表示される。

### 目的

1. `/cft:spec-create` 実行時に、仕様書の要件定義を自動的に行う
2. 成功メッセージを自動完成の有無に応じて適切に変更する

---

## 2. 対象ユーザー

cc-craft-kit を使用して仕様駆動開発を行う開発者

---

## 3. 受け入れ基準

### 必須要件

- [ ] `/cft:spec-create` 実行時に、仕様書の要件定義（背景・目的・受け入れ基準など）が自動的に生成される
- [ ] ユーザーが入力した仕様書名と説明から、適切な要件定義が推論される

### 機能要件

- [ ] Step 8（コードベース解析）をオプションではなく必須にする、または条件を緩和する
- [ ] Step 9（仕様書の自動完成）を必ず実行する
- [ ] 成功メッセージの「次のステップ」を自動完成の有無に応じて変更する
  - 自動完成した場合: 「1. 仕様書の内容を確認・調整する」
  - 自動完成しなかった場合: 「1. 仕様書を編集して要件を定義する」

### 非機能要件

- [ ] 自動生成された要件定義は、後から手動で編集可能
- [ ] 自動生成に失敗した場合でも、テンプレート状態で仕様書は作成される

---

## 4. 制約条件

- プロンプトファースト原則に従い、スラッシュコマンド定義（.md）の修正で対応する
- スクリプト変更は不要（DB 登録処理は現状のまま）

---

## 5. 依存関係

- `/cft:spec-create` スラッシュコマンド定義（`src/slash-commands/spec-create.md`）
- 仕様書テンプレート

---

## 6. 参考情報

- 現在の spec-create.md の Step 8, Step 9 の実行条件
- 成功メッセージテンプレートの内容
