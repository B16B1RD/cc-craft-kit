# ステータスの見直し

**仕様書 ID:** bd4e0f1e-6175-449b-806b-45b7385a1bf1
**フェーズ:** requirements
**作成日時:** 2025/12/03 12:00:00
**更新日時:** 2025/12/03 12:00:00

---

## 1. 背景と目的

### 背景

GitHub Projects で Issue を管理するにあたって、Todo→In Progress→In Review→Done としたい。また、デフォルトは英語名称とするが、名称はカスタマイズ可能としたい。

### 目的

GitHub Projects との連携において、ステータスワークフローを「Todo → In Progress → In Review → Done」の 4 段階に拡張し、ステータス名称をカスタマイズ可能にすることで、チームの運用に合わせた柔軟な Issue 管理を実現する。

---

## 2. 対象ユーザー

cc-craft-kit を使用し、GitHub Projects で Issue/仕様書を管理する開発者

---

## 3. 受け入れ基準

### 必須要件

- [ ] ステータスが 4 段階（Todo, In Progress, In Review, Done）に対応している
- [ ] デフォルトのステータス名称は英語（Todo, In Progress, In Review, Done）
- [ ] ステータス名称は config.json でカスタマイズ可能
- [ ] 既存の 3 段階ステータス（Todo, In Progress, Done）との後方互換性を維持

### 機能要件

- [ ] GitHub Projects 初期化時に利用可能なステータスオプションを自動検出
- [ ] Spec フェーズから GitHub ステータスへのマッピングを config.json で設定可能
- [ ] In Review ステータスが存在しない Project でも動作する（フォールバック）
- [ ] ステータス設定のバリデーション機能

### 非機能要件

- [ ] GraphQL クエリのレート制限に配慮（キャッシュ機構）
- [ ] 設定変更時に既存 Issue のステータスに影響を与えない

---

## 4. 制約条件

- GitHub Projects V2 API（GraphQL）のみサポート（REST API では非対応）
- ステータスオプション名は GitHub Projects 側の設定に依存（cc-craft-kit 側で新規作成は不可）
- Kysely スキーマの SpecPhase 型は変更しない（内部フェーズと GitHub ステータスは分離）

---

## 5. 依存関係

**既存コンポーネント:**
- `src/integrations/github/phase-status-mapper.ts` - 動的マッピングへ改修
- `src/integrations/github/projects.ts` - ステータスフィールド名のパラメータ化
- `src/integrations/github/sync.ts` - 新マッピング層の利用
- `src/commands/github/init.ts` - ステータス自動検出機能追加
- `.cc-craft-kit/config.json` - statusConfig セクション追加

**新規コンポーネント:**
- `src/core/config/github-status-config.ts` - ステータス設定管理モジュール

---

## 6. 参考情報

- GitHub Projects V2 API ドキュメント
- 既存実装: `src/integrations/github/phase-status-mapper.ts`
- 設定管理パターン: `src/core/config/github-config.ts`
