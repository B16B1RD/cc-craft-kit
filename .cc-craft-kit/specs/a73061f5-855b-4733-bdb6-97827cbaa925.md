# v0.1.4 リリース準備

**仕様書 ID:** a73061f5-855b-4733-bdb6-97827cbaa925
**フェーズ:** implementation
**作成日時:** 2025/11/30 00:00:00
**更新日時:** 2025/11/30 20:12:00

---

## 1. 背景と目的

### 背景

現在の develop ブランチを main ブランチにマージし v0.1.4 としてリリースするための準備作業を進める。develop ブランチを main ブランチにマージする PR はドラフト状態で作成済み。それ以外の作業を進める。

### 目的

v0.1.3 リリース以降に実装された GitHub Sub Issue 連携機能を含む v0.1.4 を安定した状態でリリースする。バージョン更新、ドキュメント整備、品質チェックを完了し、main ブランチへのマージと npm publish を実行する。

---

## 2. 対象ユーザー

cc-craft-kit を使用する開発者およびプロジェクトメンテナー

---

## 3. 受け入れ基準

### 必須要件

- [ ] package.json の version を 0.1.4 に更新
- [ ] CHANGELOG.md に v0.1.4 セクションを追加（GitHub Sub Issue 連携機能の記載）
- [ ] 全テストが通過すること（npm test）
- [ ] 型チェックが通過すること（npm run typecheck）
- [ ] リントが通過すること（npm run lint）

### 機能要件

- [ ] develop → main への PR をマージ
- [ ] Git タグ v0.1.4 を作成
- [ ] npm publish でパッケージを公開

### 非機能要件

- [ ] Semantic Versioning（SemVer）に準拠したバージョニング
- [ ] Keep a Changelog 形式に準拠した CHANGELOG 記述

---

## 4. 制約条件

- v0.1.4 は PATCH バージョンのため、後方互換性を維持すること
- develop → main への PR はドラフト状態で作成済み（このタスクではマージ操作は対象外）
- リリースタグの付与と npm publish は main マージ後に実施

---

## 5. 依存関係

- v0.1.3 リリース完了（2025-11-29）
- GitHub Sub Issue 連携機能の実装完了（コミット dd99509）
- データベースマイグレーション 011 の適用完了

---

## 6. 参考情報

- v0.1.3 仕様書: `.cc-craft-kit/specs/323b19cb-a6ce-4af8-8717-99c50cc8a501.md`
- GitHub リポジトリ: https://github.com/B16B1RD/cc-craft-kit
- CHANGELOG.md: Keep a Changelog 形式
- package.json: Semantic Versioning 形式

---

## 7. 設計詳細

### 7.1 アーキテクチャ設計

#### 全体構成

```
v0.1.4 リリースプロセス
┌─────────────────────────────────────────────────────────────┐
│ Phase 1: バージョン・ドキュメント更新                         │
│ ┌─────────────────┐    ┌─────────────────┐                  │
│ │ package.json    │    │ CHANGELOG.md    │                  │
│ │ version: 0.1.4  │    │ [0.1.4] section │                  │
│ └─────────────────┘    └─────────────────┘                  │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│ Phase 2: 品質チェック                                        │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐         │
│ │ sync     │→│ typecheck│→│ lint     │→│ test     │         │
│ └──────────┘ └──────────┘ └──────────┘ └──────────┘         │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│ Phase 3: リリース実行                                        │
│ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐          │
│ │ PR マージ    │→│ Git タグ作成 │→│ npm publish  │          │
│ │ develop→main │ │ v0.1.4      │ │ (GitHub      │          │
│ │              │ │             │ │  Actions)    │          │
│ └──────────────┘ └──────────────┘ └──────────────┘          │
└─────────────────────────────────────────────────────────────┘
```

#### 設計方針

- **プロンプトファースト原則**: すべての処理を Claude Code ツール（Write/Edit/Bash）で実行
- **Keep a Changelog 準拠**: CHANGELOG.md のフォーマットを維持
- **Semantic Versioning 準拠**: MINOR リリースとして 0.1.3 → 0.1.4

#### 処理フロー詳細

1. package.json の version フィールドを更新
2. CHANGELOG.md に v0.1.4 セクションを追加（GitHub Sub Issue 連携機能を記載）
3. 品質チェックコマンドを順次実行
4. develop → main への PR をマージ（既存のドラフト PR を使用）
5. Git タグ v0.1.4 を作成
6. GitHub Actions が自動的に npm publish を実行

### 7.2 実装方針

#### 修正対象ファイル

| ファイル | 変更内容 |
|---------|---------|
| package.json | version を "0.1.3" → "0.1.4" に更新 |
| CHANGELOG.md | v0.1.4 セクションを [0.1.3] の前に追加 |

#### 品質チェックコマンド

```bash
npm run sync:dogfood    # .cc-craft-kit/ への同期
npm run typecheck       # TypeScript 型チェック
npm run lint            # ESLint コード品質チェック
npm test                # Jest ユニットテスト実行
```

### 7.3 機能マッピング

| 機能 | 現在の実装 | 新しい実装 | 実装場所 |
|-----|----------|----------|---------|
| バージョン番号 | 0.1.3 | 0.1.4 | package.json:3 |
| 変更履歴 | v0.1.3 まで記載 | v0.1.4 セクション追加 | CHANGELOG.md |
| GitHub Sub Issue 連携 | 実装済み (dd99509) | 変更なし | src/integrations/github/ |
| DB マイグレーション 011 | 適用済み | 変更なし | src/core/database/migrations/ |

### 7.4 テスト戦略

| テスト対象 | テスト内容 | 検証方法 |
|----------|----------|---------|
| 型チェック | TypeScript の型整合性 | npm run typecheck |
| リント | ESLint ルール準拠 | npm run lint |
| ユニットテスト | 全テストスイート実行 | npm test |
| GitHub Sub Issue 連携 | 既存テストの通過確認 | tests/integrations/sub-issue-workflow.test.ts |

### 7.5 移行計画

#### Phase 1: バージョン・ドキュメント更新

1. package.json の version を 0.1.4 に更新
2. CHANGELOG.md に v0.1.4 セクションを追加

#### Phase 2: 品質チェック

1. npm run sync:dogfood で同期
2. npm run typecheck で型チェック
3. npm run lint でリントチェック
4. npm test でテスト実行

#### Phase 3: リリース実行

1. develop → main への PR をマージ
2. Git タグ v0.1.4 を作成
3. GitHub Actions で自動 npm publish

---

## 8. 実装タスクリスト

### Phase 1: バージョン・ドキュメント更新

- [x] package.json の version を 0.1.4 に更新
- [x] CHANGELOG.md に v0.1.4 セクションを追加

### Phase 2: 品質チェック

- [x] npm run sync:dogfood で同期確認
- [x] npm run typecheck で型チェック通過確認
- [x] npm run lint でリントチェック通過確認
- [x] npm test で全テスト通過確認

### Phase 3: リリース実行

- [ ] develop → main への PR をマージ
- [ ] Git タグ v0.1.4 を作成
- [ ] npm publish でパッケージ公開（GitHub Actions 自動実行）
