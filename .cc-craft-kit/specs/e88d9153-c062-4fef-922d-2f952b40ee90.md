---
id: "e88d9153-c062-4fef-922d-2f952b40ee90"
name: "v0.1.6 リリース準備"
phase: "completed"
branch_name: "docs/spec-e88d9153-v0-1-6-release-prep"
github_issue_number: null
pr_url: null
created_at: "2025-12-03T08:59:01.809Z"
updated_at: "2025-12-04 17:57:46"
---

# v0.1.6 リリース準備


## 1. 背景と目的

### 背景

現在の develop の内容を v0.1.6 としてリリースします。develop を main にマージする PR はドラフト状態で作成済みです。その他の準備作業をお願いします。

### 目的

v0.1.5 以降に追加された機能（GitHub Projects ステータス再見直し、環境変数設定の最適化、ステータス見直し完了）を v0.1.6 として正式リリースする。CHANGELOG.md の更新、package.json のバージョン更新、CI チェック通過確認、main ブランチへのマージを行う。
---

## 2. 対象ユーザー

cc-craft-kit を使用する開発者およびプロジェクトメンテナー
---

## 3. 受け入れ基準

### 必須要件

- [ ] CHANGELOG.md に v0.1.6 の変更内容を記載
- [ ] package.json のバージョンを 0.1.6 に更新
- [ ] すべての CI チェックが成功（Lint, Type Check, Test, Sync Check, Security Audit）
- [ ] develop → main への PR がレビュー承認済み

### 機能要件

- [ ] GitHub Projects ステータスマッピングが正しく動作することを確認
- [ ] PR merge 時に GitHub Projects ステータスが「Done」に更新される
- [ ] 環境変数設定ドキュメント（Classic PAT vs Fine-grained PAT）が最新

### 非機能要件

- [ ] Node.js 18 と 20 の両バージョンでテスト成功
- [ ] npm audit でセキュリティ警告なし
---

## 4. 制約条件

- Semantic Versioning (SemVer) に準拠
- GitHub Flow + develop ブランチモデルに従う
- リリースタグは `v0.1.6` 形式
- main ブランチへのマージは Squash and Merge
---

## 5. 依存関係

- 既存ドラフト PR（develop → main）
- GitHub Actions CI/CD パイプライン（`.github/workflows/ci.yml`, `.github/workflows/release.yml`）
- v0.1.5 タグからの変更履歴（3 コミット）
---

## 6. 参考情報

- v0.1.5 以降の主要変更:
  - #599: GitHub Projects の status 再見直し
  - #589: .env.example 中の MCP_PORT に関するサンプルを削除
  - #582: ステータスの見直し
- リリースプロセス: `.github/workflows/release.yml`
---

## 7. 設計詳細

### 7.1 アーキテクチャ設計

#### 全体構成

```
┌─ Pull Request / Push to develop or main
│
├─ GitHub Actions: CI Workflow (.github/workflows/ci.yml)
│  ├─ Lint (npm run lint)
│  ├─ Type Check (npm run typecheck)
│  ├─ Test (npm run test + coverage)
│  ├─ Sync Check (npm run check:sync)
│  └─ Security Audit (npm audit + snyk)
│  ↓ [All pass?]
│
├─ Squash and Merge: develop → main
│
├─ Create Git Tag: v0.1.6
│  ↓
└─ GitHub Actions: Release Workflow (.github/workflows/release.yml)
   ├─ Checkout
   ├─ npm install
   ├─ npm run sync:dogfood
   ├─ Create .cc-craft-kit.tar.gz
   ├─ Generate changelog (git log)
   ├─ Create GitHub Release
   ├─ Upload .cc-craft-kit.tar.gz
   └─ Deploy install.sh to GitHub Pages
```

#### 設計方針

- **最小限の変更原則**: リリース準備では package.json と CHANGELOG.md のみ修正
- **段階的リリース**: 設計 → 実装 → 品質チェック → リリース実行の流れ
- **Semantic Versioning**: v0.1.5 → v0.1.6（PATCH リリース、後方互換性保持）

### 7.2 実装方針

#### 修正対象ファイル

| ファイル | 変更内容 |
|---------|---------|
| `package.json` | version フィールドを "0.1.5" → "0.1.6" に更新 |
| `CHANGELOG.md` | [0.1.6] セクションを追加（#599, #589, #582 の変更内容を記載） |

#### CHANGELOG.md 記載内容

```markdown
## [0.1.6] - 2025-12-03

### Added

- GitHub Projects ステータスマッピング設定の自動検出機能（config.json statusConfig）
- 複数ステータスパターンへの対応（3段階、4段階ステータスなど）
- phase 変更時の Projects ステータス自動更新（PR merge で Done に更新）

### Changed

- GitHub status-config.ts を設定駆動型アーキテクチャに統一
- DynamicStatusMapper による後方互換性の維持
- phase-status-mapper.ts でフォールバック処理を実装

### Fixed

- MCP_PORT サンプル設定を削除（不要な環境変数設定を削除）
```

### 7.3 機能マッピング

| 機能 | 現在の実装 | 変更内容 | 実装場所 |
|-----|----------|----------|---------|
| バージョン番号 | 0.1.5 | 0.1.6 に更新 | package.json |
| 変更履歴 | v0.1.5 まで記載 | v0.1.6 セクション追加 | CHANGELOG.md |
| CI チェック | 自動実行 | 変更なし（確認のみ） | .github/workflows/ci.yml |
| リリース自動化 | タグトリガー | 変更なし（実行のみ） | .github/workflows/release.yml |

### 7.4 テスト戦略

| テスト対象 | テスト内容 | 検証方法 |
|----------|----------|---------|
| Lint | コードスタイルチェック | `npm run lint` |
| Type Check | TypeScript 型チェック | `npm run typecheck` |
| Unit Test | Jest テスト（Node 18, 20） | `npm test` |
| Sync Check | src/ と .cc-craft-kit/ の同期 | `npm run check:sync` |
| Security | 脆弱性スキャン | `npm audit` |

### 7.5 移行計画

#### Phase 1: ドキュメント更新

1. package.json の version を "0.1.6" に更新
2. CHANGELOG.md に [0.1.6] セクションを追加
3. npm run sync:dogfood で同期

#### Phase 2: 品質チェック

1. npm run typecheck
2. npm run lint
3. npm test
4. npm run check:sync
5. npm audit

#### Phase 3: リリース実行

1. develop → main PR をレビュー承認
2. Squash and Merge で main にマージ
3. Git タグ v0.1.6 を作成・プッシュ
4. GitHub Actions release.yml の自動実行を確認
5. GitHub Release ページで公開を確認
---

## 8. 実装タスクリスト

### Phase 1: ドキュメント更新

- [x] package.json の version を "0.1.6" に更新 (#601)
- [x] CHANGELOG.md に [0.1.6] セクションを追加 (#602)
- [x] npm run sync:dogfood で同期 (#603)

### Phase 2: 品質チェック

- [x] npm run typecheck で型チェック成功を確認 (#604)
- [x] npm run lint でリントチェック成功を確認 (#605)
- [x] npm test で全テスト成功を確認（Node 18, 20） (#606)
- [x] npm run check:sync で同期確認成功を確認 (#607)
- [x] npm audit でセキュリティチェック成功を確認 (#608)

### Phase 3: リリース実行

- [ ] develop → main PR をレビュー承認 (#609)
- [ ] Squash and Merge で main にマージ (#610)
- [ ] Git タグ v0.1.6 を作成・プッシュ (#611)
- [ ] GitHub Actions release.yml の自動実行を確認 (#612)
