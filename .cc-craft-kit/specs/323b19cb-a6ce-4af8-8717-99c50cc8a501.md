# v0.1.3 リリース準備

**仕様書 ID:** 323b19cb-a6ce-4af8-8717-99c50cc8a501
**フェーズ:** design
**作成日時:** 2025/11/29 22:20:00
**更新日時:** 2025/11/29 22:25:00

---

## 1. 背景と目的

### 背景

現在の develop ブランチには v0.1.2 リリース以降、以下の変更が含まれている:

- `/cft:init` コマンドの引数を不要に変更（PR #418）
- エラーハンドリング機構の改善

これらの変更を v0.1.3 として正式リリースするための準備作業が必要である。

### 目的

- develop ブランチの内容を v0.1.3 としてリリースする
- CHANGELOG.md、package.json のバージョン更新
- ドキュメントの整合性確認
- 品質チェック（型チェック、リント、テスト）の実施

---

## 2. 対象ユーザー

cc-craft-kit のメンテナー・リリース担当者

---

## 3. 受け入れ基準

### 必須要件

- [ ] package.json の version を `0.1.3` に更新すること
- [ ] CHANGELOG.md に v0.1.3 セクションを追加すること
- [ ] `npm run typecheck` が成功すること
- [ ] `npm run lint` が成功すること
- [ ] `npm test` が成功すること

### 機能要件

- [ ] README.md の `/cft:init` コマンド例を更新すること（引数なしに変更）
- [ ] docs/QUICK_START.md の `/cft:init` コマンド例を更新すること
- [ ] `npm run sync:dogfood` で同期が完了すること

### 非機能要件

- [ ] develop → main への PR を作成すること
- [ ] Git タグ `v0.1.3` を作成すること

---

## 4. 制約条件

- Semantic Versioning に従い、PATCH リリース（後方互換性維持）として扱う
- Keep a Changelog v1.0.0 形式に従う
- リリース前に全テストが成功している必要がある

---

## 5. 依存関係

### 影響を受けるファイル

| ファイル | 変更内容 |
|---|---|
| `package.json` | version を `0.1.3` に更新 |
| `CHANGELOG.md` | v0.1.3 セクションを追加 |
| `README.md` | `/cft:init` コマンド例の更新 |
| `docs/QUICK_START.md` | `/cft:init` コマンド例の更新 |

---

## 6. 参考情報

- 前回リリース: v0.1.2（2025-11-28）
- PR #418: `/cft:init` コマンドの引数を不要に変更
- Keep a Changelog: https://keepachangelog.com/ja/1.0.0/
- Semantic Versioning: https://semver.org/lang/ja/

---

## 7. 設計詳細

### 7.1 アーキテクチャ設計

#### 全体構成

```
リリース準備作業
    │
    ├─ Phase 1: バージョン・ドキュメント更新
    │   ├─ package.json（version: 0.1.2 → 0.1.3）
    │   ├─ CHANGELOG.md（v0.1.3 セクション追加）
    │   └─ error-handler.ts（tasks フェーズ削除）
    │
    ├─ Phase 2: 品質チェック
    │   ├─ npm run sync:dogfood
    │   ├─ npm run typecheck
    │   ├─ npm run lint
    │   └─ npm test
    │
    └─ Phase 3: リリース
        ├─ develop → main PR 作成
        ├─ Git タグ v0.1.3 作成
        └─ npm publish
```

#### 設計方針

- **最小限の変更**: パッチリリースとして必要最小限の変更のみ実施
- **ドキュメント整合性**: README.md、QUICK_START.md は既に引数なしで記載済みのため変更不要
- **4フェーズモデル統一**: error-handler.ts の validPhases から tasks を削除

#### 処理フロー詳細

```
1. package.json バージョン更新
   └─ "version": "0.1.2" → "0.1.3"

2. CHANGELOG.md 更新
   └─ v0.1.3 セクションを v0.1.2 の前に挿入

3. error-handler.ts 修正
   └─ validPhases から 'tasks' を削除

4. 同期・品質チェック
   └─ sync:dogfood → typecheck → lint → test

5. PR 作成・マージ
   └─ develop → main

6. タグ作成・公開
   └─ git tag v0.1.3 → npm publish
```

### 7.2 実装方針

#### 修正対象ファイル

| ファイル | 行番号 | 変更内容 |
|---------|--------|---------|
| `package.json` | 3 | version を `0.1.3` に更新 |
| `CHANGELOG.md` | 7（挿入） | v0.1.3 セクションを追加 |
| `src/commands/utils/error-handler.ts` | 204 | validPhases から `tasks` を削除 |

#### CHANGELOG.md v0.1.3 セクション内容

```markdown
## [0.1.3] - 2025-11-29

### Added

- `/cft:init` コマンドの簡素化：引数を不要に変更

### Changed

- 4フェーズモデルへの統一：`validPhases` から `tasks` フェーズを削除

### Fixed

- なし
```

### 7.3 機能マッピング

| 機能 | 現在の実装 | 新しい実装 | 実装場所 |
|-----|----------|----------|---------|
| バージョン | 0.1.2 | 0.1.3 | package.json:3 |
| フェーズバリデーション | 5フェーズ（tasks含む） | 4フェーズ | error-handler.ts:204 |
| 変更履歴 | v0.1.2 まで | v0.1.3 追加 | CHANGELOG.md |

### 7.4 テスト戦略

| テスト対象 | テスト内容 | 検証方法 |
|----------|----------|---------|
| バージョン整合性 | package.json が 0.1.3 | `npm run typecheck` |
| フェーズバリデーション | tasks でエラー発生 | 既存テスト |
| 全体品質 | lint・型チェック・テスト | `npm run lint && npm test` |

### 7.5 移行計画

#### Phase 1: バージョン・ドキュメント更新

1. package.json の version を 0.1.3 に更新
2. CHANGELOG.md に v0.1.3 セクションを追加
3. error-handler.ts の validPhases から tasks を削除

#### Phase 2: 品質チェック

1. `npm run sync:dogfood` で同期
2. `npm run typecheck` で型チェック
3. `npm run lint` でリント
4. `npm test` でテスト実行

#### Phase 3: リリース

1. develop → main への PR 作成
2. PR マージ後、Git タグ v0.1.3 を作成
3. npm publish でパッケージ公開

---

## 8. 実装タスクリスト

### Phase 1: バージョン・ドキュメント更新

- [ ] package.json の version を `0.1.3` に更新
- [ ] CHANGELOG.md に v0.1.3 セクションを追加
- [ ] src/commands/utils/error-handler.ts の validPhases から `tasks` を削除

### Phase 2: 品質チェック

- [ ] `npm run sync:dogfood` で同期実行
- [ ] `npm run typecheck` で型チェック実行
- [ ] `npm run lint` でリント実行
- [ ] `npm test` で全テスト実行

### Phase 3: リリース

- [ ] develop → main への PR 作成
- [ ] Git タグ `v0.1.3` を作成
