# インストールすると .cc-craft-kit/ に .claude/command/cft/ と重複したものがインストールされる

**仕様書 ID:** 86fc6e0e-1c81-49e1-ab00-78b3b200c73a
**フェーズ:** requirements
**作成日時:** 2025/12/04 18:08:20
**更新日時:** 2025/12/04 18:08:20

---

## 1. 背景と目的

### 背景

.cc-craft-kit/ に不要なものが大量にインストールされる構成を見直してほしい。 .cc-craft-kit/ の必要性、必要だとして場所の問題はこれで良いのか、Git の管理対象とすべきか否か（この環境ではなくユーザー環境において）

### 目的

cc-craft-kit のインストール構成を見直し、以下の観点から最適化を行う:
1. `.cc-craft-kit/` ディレクトリの必要性と役割の明確化
2. `.claude/commands/cft/` との重複問題の解決
3. ユーザー環境での Git 管理方針の決定
4. インストールされるファイルの最小化

---

## 2. 対象ユーザー

cc-craft-kit をプロジェクトにインストールして使用する開発者

---

## 3. 受け入れ基準

### 必須要件

- [ ] インストール後のディスク使用量が最適化されていること
- [ ] `.cc-craft-kit/` と `.claude/commands/cft/` 間の重複が排除されていること
- [ ] ユーザー環境での Git 管理方針が明確に文書化されていること

### 機能要件

- [ ] インストールスクリプトが最小限のファイルのみを展開すること
- [ ] シンボリックリンクにより実ファイルの重複を回避すること
- [ ] オフライン環境でも動作すること（自己完結型の構成維持）

### 非機能要件

- [ ] インストール時間が従来と同等以下であること
- [ ] Windows/macOS/Linux の全プラットフォームで動作すること
- [ ] インストール手順のドキュメントが更新されていること

---

## 4. 制約条件

- 既存の Claude Code との互換性を維持すること
- プロンプトファースト原則に従い、可能な限り Markdown で実現すること
- 後方互換性を考慮し、既存ユーザーの環境を破壊しないこと

---

## 5. 依存関係

### 関連ファイル
- `scripts/install.sh` - インストールスクリプト
- `src/scripts/sync-dogfood.ts` - 同期スクリプト
- `.github/workflows/release.yml` - リリースワークフロー
- `.gitignore` - Git 無視設定

### 関連コンポーネント
- `.cc-craft-kit/commands/` - TypeScript コマンド実装
- `.cc-craft-kit/slash-commands/` - スラッシュコマンド定義
- `.claude/commands/cft/` - シンボリックリンク先

---

## 6. 参考情報

- 現在の構成: `.claude/commands/cft` → `../../.cc-craft-kit/commands` へのシンボリックリンク
- インストールアーカイブ: `.cc-craft-kit.tar.gz`（GitHub Release で配布）
- 同期コマンド: `npm run sync:dogfood`

### 現状分析結果

コードベース解析により、現在の構成は以下の通り:
1. **重複はシンボリックリンクで回避済み** - 実ファイルは `.cc-craft-kit/commands/` に1つのみ
2. **Git 管理**: `.cc-craft-kit/specs/` などの重要ファイルは追跡、一時ファイルは除外
3. **配布方式**: npm package ではなく GitHub Release の tar.gz で配布

### 検討事項
1. `.cc-craft-kit/` の場所をプロジェクトルートから変更すべきか
2. ユーザーは `.cc-craft-kit/specs/` を Git 管理すべきか（推奨）
3. 不要なファイル（開発専用ファイル）がアーカイブに含まれていないか確認
