# PR の作成はドラフト状態で作成

**仕様書 ID:** 0b6eb481-9519-4db9-b646-268334ad7da3
**フェーズ:** requirements
**作成日時:** 2025/12/01 00:00:00
**更新日時:** 2025/12/01 00:00:00

---

## 1. 背景と目的

### 背景

現在、PR の作成は Ready 状態で作成されているが、これをデフォルトでドラフト状態で作成するように変更する。

cc-craft-kit では、仕様書の completed フェーズへの移行時や task done サブコマンド実行時に `gh pr create` コマンドで PR を作成している。現状では `--draft` フラグはオプション扱いとなっており、明示的に指定しない限り Ready 状態で PR が作成される。

しかし、PR を最初から Ready 状態で作成すると、以下の問題が発生する可能性がある：
- レビュアーに通知が飛び、まだ準備が整っていない PR をレビューしてしまう
- CI/CD が即座に実行され、不要なリソース消費が発生する
- PR の説明やコミット整理が完了する前にマージされるリスク

### 目的

PR 作成時のデフォルト動作をドラフト状態に変更し、レビュー準備が整ってから明示的に Ready 状態に変更できるようにする。これにより、より安全で計画的な PR ワークフローを実現する。

---

## 2. 対象ユーザー

cc-craft-kit を使用する開発者

---

## 3. 受け入れ基準

### 必須要件

- [ ] `gh pr create` コマンド実行時にデフォルトで `--draft` フラグが付与される
- [ ] 既存の `--draft` フラグ指定のロジックを削除または反転させる

### 機能要件

- [ ] spec-phase.md の completed フェーズで pr-creator スキル実行時にドラフト PR が作成される
- [ ] task.md の done サブコマンドで PR 作成時にドラフト PR が作成される
- [ ] 必要に応じて `--ready` フラグで Ready 状態の PR を作成できる（オプション）

### 非機能要件

- [ ] 既存の PR 作成フローとの互換性を維持する
- [ ] ドキュメント（コマンドヘルプ等）を更新する

---

## 4. 制約条件

- GitHub CLI (gh) がインストールされていること
- `gh pr create --draft` オプションが利用可能な gh CLI バージョンであること
- プロンプトファースト原則に従い、プロンプト層（.md ファイル）の変更で対応する

---

## 5. 依存関係

### 変更対象ファイル

- `.cc-craft-kit/slash-commands/spec-phase.md` - completed フェーズでの PR 作成処理
- `.cc-craft-kit/slash-commands/task.md` - task done サブコマンドでの PR 作成処理
- `.cc-craft-kit/skills/pr-creator.md` - pr-creator スキルの定義

### 関連コンポーネント

- `src/integrations/github/pull-request.ts` - PR URL 記録（変更不要の可能性あり）
- `src/integrations/github/pr-cleanup.ts` - PR マージ後処理（変更不要）

---

## 6. 参考情報

- [GitHub CLI - gh pr create](https://cli.github.com/manual/gh_pr_create)
- task.md Line 513-521: 現在の PR 作成処理
- spec-phase.md Line 511-518: completed フェーズでの pr-creator スキル呼び出し
