# インストールで警告表示

**仕様書 ID:** f88b168a-bafe-481a-b04c-3d6517858195
**フェーズ:** design
**作成日時:** 2025/12/04 12:00:00
**更新日時:** 2025/12/04 20:37:00

---

## 1. 背景と目的

### 背景

インストール実行時（`curl -fsSL ... | sh`）に以下の警告が表示される問題がある：

1. **`.env.example` が見つからない警告**: リリースアーカイブ（`.cc-craft-kit.tar.gz`）に `.env.example` が含まれていないため、`generate_env()` 関数で警告が表示される
2. **`\n` が改行されない問題**: `warn()` 関数で `\n` がリテラル文字列として表示され、改行エスケープシーケンスが機能していない
3. **既存 `.env` の上書きリスク**: 現在の実装では既存 `.env` はスキップされるが、ユーザーへのフィードバックが不明確

### 目的

インストールスクリプトの警告表示を修正し、ユーザーが問題なくセットアップを完了できるようにする

---

## 2. 対象ユーザー

cc-craft-kit を新規インストールする開発者

---

## 3. 受け入れ基準

### 必須要件

- [ ] `.env.example` がリリースアーカイブに含まれ、インストール時に `.env` が自動生成される
- [ ] 警告メッセージ内の `\n` が正しく改行として表示される

### 機能要件

- [ ] `release.yml` で `.env.example` を `.cc-craft-kit/` にコピーしてからアーカイブを作成する
- [ ] `install.sh` の `warn()` 関数で改行エスケープシーケンスが正しく処理される
- [ ] 既存 `.env` が存在する場合、上書きせず保持する旨を明確に表示する

### 非機能要件

- [ ] POSIX シェル準拠を維持する（macOS、Linux、Git Bash 対応）
- [ ] 既存のインストールフローを破壊しない

---

## 4. 制約条件

- シェルスクリプトは POSIX 準拠を維持する必要がある
- GitHub Actions 環境（ubuntu-latest）での動作確認が必要
- プロンプトファースト原則に従い、TypeScript よりシェルスクリプト修正を優先

---

## 5. 依存関係

- `scripts/install.sh` - インストールスクリプト本体
- `.github/workflows/release.yml` - リリースアーカイブ生成
- `.env.example` - 環境変数テンプレート

---

## 6. 参考情報

- 問題のあるコード箇所:
  - `scripts/install.sh:260, 267` - `\n` が改行されない warn 呼び出し
  - `scripts/install.sh:287` - `.env.example` の探索パス
  - `.github/workflows/release.yml:32` - アーカイブ生成（`.env.example` 未包含）
