---
description: "test-generator サブエージェントで単体テストを自動生成"
argument-hint: "<file-pattern>"
---

# テスト生成

`test-generator` サブエージェントを実行して、単体テストを自動生成します。

## 引数

- `$1` (必須): 対象ファイルのパターン (例: `src/commands/spec/create.ts`)

## 実行内容

1. 指定されたファイルパターンに一致するファイルを検索
2. `test-generator` サブエージェントを実行してテストを自動生成
3. 以下のテストケースを網羅：
   - 正常系のテストケース
   - エッジケース（境界値、null、undefined など）
   - エラーケース（例外処理の検証）
   - モック・スタブの作成

## 使用例

```bash
# 特定のファイルのテストを生成
/cc-craft-kit:test-generate "src/commands/spec/create.ts"

# 複数ファイルのテストを生成
/cc-craft-kit:test-generate "src/commands/**/*.ts"
```

---

以下のコマンドを実行してテスト生成を開始してください。

```bash
npx tsx .cc-craft-kit/commands/quality/test-generate.ts "$1"
```

## 自動実行フロー

重要: コマンド実行後、ユーザーに確認を求めずに、以下の処理を**自動的に実行**してください。

1. **ファイルパターンの解決**:
   - Glob ツールで `$1` パターンに一致するファイルを検索
   - 対象ファイルが存在しない場合はエラーメッセージを表示

2. **test-generator サブエージェントの実行**:
   - Task ツールで `test-generator` サブエージェントを起動
   - 対象ファイルごとに以下を実行：
     - Read ツールで対象ファイルを読み込む
     - 関数、クラス、メソッドの構造を解析
     - テストケースを設計（正常系、エッジケース、エラーケース）

3. **テストファイルの生成**:
   - テストファイルのパスを決定（`tests/` ディレクトリに配置）
   - Write ツールでテストファイルを作成
   - テストフレームワーク（Vitest）の構文に従う
   - モック・スタブが必要な場合は適切に設定

4. **テストの実行とカバレッジ確認**:
   - Bash ツールで `npm test` を実行
   - カバレッジレポートを確認
   - テストが失敗した場合は、修正案を提示
