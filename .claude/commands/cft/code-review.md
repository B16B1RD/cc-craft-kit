---
description: "code-reviewer サブエージェントでコード品質をレビュー"
argument-hint: "<file-pattern>"
---

# コードレビュー

`code-reviewer` サブエージェントを実行して、コード品質、セキュリティ、ベストプラクティスを検証します。

## 引数

- `$1` (オプション): 対象ファイルのパターン (例: `src/**/*.ts`、省略時は全プロジェクトファイル)

## 実行内容

1. 指定されたファイルパターンに一致するファイルを検索
2. `code-reviewer` サブエージェントを実行してコード品質を検証
3. 以下の観点でレビュー：
   - コード品質とリーダビリティ
   - セキュリティ脆弱性
   - パフォーマンスの問題
   - ベストプラクティスへの準拠
   - 潜在的なバグ

## 使用例

```bash
# 特定のファイルをレビュー
/cft:code-review "src/commands/spec/create.ts"

# ディレクトリ全体をレビュー
/cft:code-review "src/commands/**/*.ts"

# プロジェクト全体をレビュー
/cft:code-review
```

---

## 自動実行フロー

重要: コマンド実行後、ユーザーに確認を求めずに、以下の処理を**自動的に実行**してください。

1. **ファイルパターンの解決**:
   - 引数が指定されている場合: Glob ツールで `$1` パターンに一致するファイルを検索
   - 引数が省略された場合: `src/**/*.ts` と `tests/**/*.ts` を対象とする

2. **code-reviewer サブエージェントの実行**:
   - Task ツールで `code-reviewer` サブエージェントを起動
   - 対象ファイルごとに以下を分析：
     - Read ツールで対象ファイルを読み込む
     - コード品質、セキュリティ、パフォーマンスの問題を検出
     - ベストプラクティスへの準拠を確認

3. **レビュー結果の報告**:
   - 発見された問題点をカテゴリ別に整理
   - 重要度（Critical/High/Medium/Low）でソート
   - 具体的な改善提案を提示

4. **修正の提案**:
   - Critical/High の問題については、修正案を提示
   - ユーザーの承認を得た後、Edit ツールで修正を実施
